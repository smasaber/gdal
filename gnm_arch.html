<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>GDAL: GNM Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDAL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="usergroup0.html"><span>Download</span></a></li>
      <li><a href="https://github.com/OSGeo/gdal/issues/"><span>Issue&#160;Tracker</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GNM Architecture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document is intended to describe the purpose and the structure of Geographic Network Model classes. GNM is the part of GDAL and provides the methods of creating, managing and analysing geographical networks.</p>
<p>The key purpose of GNM classes:</p>
<ul>
<li>
<p class="startli">To provide an abstraction for different existed network formats, like GDAL (previously OGR) provides one for spatial vector formats;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">To provide a network functionality to those spatial formats which does not have it at all.</p>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="gnm_arch_general_concept"></a>
General concept</h1>
<p>Any real-world network can be represented as a set of vector data, which can be itself represented in GDAL as a <a class="el" href="classGDALDataset.html" title="A set of associated raster bands, usually from one file. ">GDALDataset</a>. In GNM this data consists of two parts. Network's topology (graph), network's metadata (name/description), set of special feature identifiers, etc. belong to the "network part", while the common for GDAL layers, features, geometries belong to the "spatial/attribute part". In order to work with the datasets of different formats the following classes were designed in GNM:</p>
<p><b>Network</b>: <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> represents an abstract network. The network data and spatial/attribute data in a dataset of some format in fact can be not separable (just additional layers/fields/tags), while the concrete implementation of <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> "knows" which data from the whole dataset refers to "network part" and is able to operate it. <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> allows user the following:</p>
<ul>
<li>
<p class="startli">Setting/unsetting connections. These generic methods of building the network topology (automatically and manually) receive the identifiers of features being connected in a common way, while the concrete implementation knows where and how to store and build the topology;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Reading connections. The generic methods return the connections in the common way;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Adding/removing layers/features. When the feature or layer is being added to the network some actions can be initiated (weights change in a graph, cascade changes in connected features). Concrete <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> describes how it is done.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Defining network's business logic or behaviour. It can be expressed in network rules or constraints/restrictions. Expected that each rule can be set from a string and each concrete <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> will transform it to the internal look.</p>
<p class="endli"></p>
</li>
</ul>
<p><b>Format</b>: <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> inherits <a class="el" href="classGDALDataset.html" title="A set of associated raster bands, usually from one file. ">GDALDataset</a> and looks like OGRDatasource with additional functionality. There are a set of GDAL drivers for networks. The generic network implementation in GDAL provides additional functionality like rules, virtual edges and vertices. Also, while editing the feature the network control the network rules and other specific, and can deny saving edits. The other network drivers (pgRouting, OSRM, GraphHopper, etc.) should provide the basic functionality via the <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> class.</p>
<h1><a class="anchor" id="gnm_arch_network_formats"></a>
Network formats</h1>
<p>To add a <b>native</b> support of the existed network format (like PostGIS pgRouting, Oracle Spatial Networks, topology in GML, etc.) to GNM the developer should implement the corresponding GNMDriver-GNMNetwork interface. But there is also a capability to use the <b>generic</b> network format, which is already implemented in GNM as a special class. It can be extremely useful when there is a need to create and use a network in the format that initially does not have its "network part" (like ESRI Shapefile) directly.</p>
<p><b><a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a></b>: <a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> is a concrete implementation of the <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a>. <a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> intends to support the most <a class="el" href="classGDALDataset.html" title="A set of associated raster bands, usually from one file. ">GDALDataset</a> drivers (depends on the corresponding driver capabilities). Technically the network format abstraction is achieved with the help of GDAL abstraction: datasets and layers approach. GNMGdalNetwork aggregates a <a class="el" href="classGDALDataset.html" title="A set of associated raster bands, usually from one file. ">GDALDataset</a> instance where the "network part" is represented as a set of "system layers" (wkbNone geometry, specific attribute fields) and the spatial/attribute data is regarded as the set of "class layers" or "classes" (layers with geometries and attributes, as usual). The "network part" is created and maintained by <a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> automatically and provides methods to work with it.</p>
<p>The way of describing real-world networks by <a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> intends to be a generic, because:</p>
<ul>
<li>
<p class="startli">The most general type of graph is used, which holds every useful information: directions of edges (directed/undirected), edge costs (weighted/unweighted). This graph is stored as an incidence list: source vertex feature id, target vertex feature id, edge feature id, direct cost, inverse cost, direction of edge;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Any feature with any geometry can be the vertex or the edge in a graph. Also, it may be no feature “under” the connection's edge at all (actually the virtual edge is created for this case). All this means that user operates with the feature identifiers, while the <a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> guaranties the connections integrity among features; </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Any feature in the network will gain the unique identifier – Global Feature Identifier (GFID) which allows unify any amount of "class layers" under one network;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> uses its own way to determine the network's business logic. See <a class="el" href="classGNMGenericNetwork.html#ad8f2c39e4e5d06ea26dfab89eb3609b1" title="Create network rule. ">GNMGenericNetwork::CreateRule()</a> for more details.</p>
<p class="endli"></p>
</li>
</ul>
<p>See the <a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a> class documentation for more details.</p>
<p>The network of common format has also the following important features:</p>
<ul>
<li>
<p class="startli">The single spatial reference system is used in the network, that means that each feature which appears in the network will be transformed to this SRS;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The network always created void and there is a need to import or create features;</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">It is not possible to remove the "network part" from the dataset – only delete the whole network with all data. The deletion is made layer by layer and deletes only system and class layers which registered in the network.</p>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="gnm_arch_analysis"></a>
Network analysis</h1>
<p>The network analysis in GNM is implemented in <a class="el" href="classGNMNetwork.html" title="General GNM class which represents a geography network of common format. ">GNMNetwork</a> object.</p>
<p><b><a class="el" href="classGNMGenericNetwork.html" title="GNM class which represents a geography network of generic format. ">GNMGenericNetwork</a></b> holds the graph in memory in STL containers and provides basic algorithms which return the results in the array-form (e.g. std::vector full of path's edges and vertexes GFIDs). But the caller get a result as OGRlayer there features get from layers consist the network. Also some additional fields created (VERTEX/EDGE indicator field, GFID, layer name, etc.). The caller have to free the result <a class="el" href="classOGRLayer.html" title="This class represents a layer of simple features, with access methods. ">OGRLayer</a> via ReleaseResultSet</p>
</div></div><!-- contents -->
<hr>
Generated for GDAL by
<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.8.
</body>
</html>
