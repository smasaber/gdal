<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>GDAL: Simple C Example: gdalinfo_lib.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDAL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="usergroup0.html"><span>Download</span></a></li>
      <li><a href="https://github.com/OSGeo/gdal/issues/"><span>Issue&#160;Tracker</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Simple C Example: gdalinfo_lib.cpp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Project:  GDAL Utilities</span></div>
<div class="line"><span class="comment"> * Purpose:  Command line application to list info about a file.</span></div>
<div class="line"><span class="comment"> * Author:   Frank Warmerdam, warmerdam@pobox.com</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * ****************************************************************************</span></div>
<div class="line"><span class="comment"> * Copyright (c) 1998, Frank Warmerdam</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2007-2015, Even Rouault &lt;even.rouault at spatialys.com&gt;</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2015, Faza Mahamood</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div>
<div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div>
<div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div>
<div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div>
<div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div>
<div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div>
<div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</span></div>
<div class="line"><span class="comment"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div>
<div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div>
<div class="line"><span class="comment"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div>
<div class="line"><span class="comment"> * DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><span class="comment"> ****************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpl__port_8h.html">cpl_port.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="gdal__utils_8h.html">gdal_utils.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gdal_utils_priv.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;new&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;commonutils.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpl__conv_8h.html">cpl_conv.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpl__error_8h.html">cpl_error.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;cpl_json_header.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpl__minixml_8h.html">cpl_minixml.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;cpl_progress.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpl__string_8h.html">cpl_string.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpl__vsi_8h.html">cpl_vsi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="gdal_8h.html">gdal.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="gdal__alg_8h.html">gdal_alg.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="gdal__priv_8h.html">gdal_priv.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gdal_rat.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ogr__api_8h.html">ogr_api.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ogr__srs__api_8h.html">ogr_srs_api.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ogr__spatialref_8h.html">ogr_spatialref.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ogrgeojsonreader.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ogrgeojsonwriter.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using</span> std::vector;</div>
<div class="line"></div>
<div class="line">CPL_CVSID(<span class="stringliteral">&quot;$Id$&quot;</span>)</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">typedef enum { GDALINFO_FORMAT_TEXT = 0, GDALINFO_FORMAT_JSON = 1</div>
<div class="line">} GDALInfoFormat;</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                           GDALInfoOptions                            */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span><a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a></div>
<div class="line">{</div>
<div class="line">    GDALInfoFormat eFormat;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bComputeMinMax;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bReportHistograms;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bReportProj4;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bStats;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bApproxStats;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bSample;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bComputeChecksum;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bShowGCPs;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bShowMetadata;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bShowRAT;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bShowColorTable;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bListMDD;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> bShowFileList;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">char</span> **papszExtraMDDomains;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> bStdoutOutput;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">GDALInfoReportCorner( <span class="keyword">const</span> <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>* psOptions,</div>
<div class="line">                      <a class="code" href="gdal_8h.html#a2316f0c00f9997839f782ec946f8303d">GDALDatasetH</a> hDataset,</div>
<div class="line">                      <a class="code" href="ogr__api_8h.html#a069f206f0e8e54328d648c14658cbf81">OGRCoordinateTransformationH</a> hTransform,</div>
<div class="line">                      <span class="keyword">const</span> <span class="keywordtype">char</span> * corner_name,</div>
<div class="line">                      <span class="keywordtype">double</span> x,</div>
<div class="line">                      <span class="keywordtype">double</span> y,</div>
<div class="line">                      <span class="keywordtype">bool</span> bJson,</div>
<div class="line">                      json_object *poCornerCoordinates,</div>
<div class="line">                      json_object *poLongLatExtentCoordinates,</div>
<div class="line">                      <a class="code" href="classCPLString.html">CPLString</a>&amp; osStr );</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">GDALInfoReportMetadata( <span class="keyword">const</span> <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>* psOptions,</div>
<div class="line">                        <a class="code" href="gdal_8h.html#ace297748fac88851533c56ddec20084f">GDALMajorObjectH</a> hObject,</div>
<div class="line">                        <span class="keywordtype">bool</span> bIsBand,</div>
<div class="line">                        <span class="keywordtype">bool</span> bJson,</div>
<div class="line">                        json_object *poMetadata,</div>
<div class="line">                        <a class="code" href="classCPLString.html">CPLString</a>&amp; osStr );</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> Concat( <a class="code" href="classCPLString.html">CPLString</a>&amp; osRet, <span class="keywordtype">bool</span> bStdoutOutput,</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">char</span>* pszFormat, ... ) <a class="code" href="cpl__port_8h.html#aab555219f8d323e6054c93dde4a8b2f8">CPL_PRINT_FUNC_FORMAT</a> (3, 4);</div>
<div class="line"></div>
<div class="line">static <span class="keywordtype">void</span> Concat( <a class="code" href="classCPLString.html">CPLString</a>&amp; osRet, <span class="keywordtype">bool</span> bStdoutOutput,</div>
<div class="line">                    const <span class="keywordtype">char</span>* pszFormat, ... )</div>
<div class="line">{</div>
<div class="line">    va_list args;</div>
<div class="line">    va_start( args, pszFormat );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( bStdoutOutput )</div>
<div class="line">    {</div>
<div class="line">        vfprintf(stdout, pszFormat, args );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="classCPLString.html">CPLString</a> osTarget;</div>
<div class="line">            osTarget.<a class="code" href="classCPLString.html#afee36b31c4bed3eae88cb502beca3099">vPrintf</a>( pszFormat, args );</div>
<div class="line"></div>
<div class="line">            osRet += osTarget;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span>( <span class="keyword">const</span> std::bad_alloc&amp; )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="cpl__error_8h.html#afda4d86428c1c533449ae6a69cdf430d">CPLError</a>(CE_Failure, <a class="code" href="cpl__error_8h.html#aec7dba1acbad288d224d52a2b3ef990c">CPLE_OutOfMemory</a>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    va_end( args );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                             GDALInfo()                               */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> *<a class="code" href="gdal__utils_8h.html#a39aaaa537474fead1ef4575e61e9b96d">GDALInfo</a>( <a class="code" href="gdal_8h.html#a2316f0c00f9997839f782ec946f8303d">GDALDatasetH</a> hDataset, <span class="keyword">const</span> <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a> *psOptions )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( hDataset == <span class="keyword">nullptr</span> )</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>* psOptionsToFree = <span class="keyword">nullptr</span>;</div>
<div class="line">    <span class="keywordflow">if</span>( psOptions == <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        psOptionsToFree = <a class="code" href="gdal__utils_8h.html#a7c046943d55759e5b2f4007edbaaf477">GDALInfoOptionsNew</a>(<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">        psOptions = psOptionsToFree;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classCPLString.html">CPLString</a> osStr;</div>
<div class="line">    json_object *poJsonObject = <span class="keyword">nullptr</span>;</div>
<div class="line">    json_object *poBands = <span class="keyword">nullptr</span>;</div>
<div class="line">    json_object *poMetadata = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">bool</span> bJson = psOptions-&gt;eFormat == GDALINFO_FORMAT_JSON;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report general info.                                            */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <a class="code" href="gdal_8h.html#adfd09c07260442427a225e2a536ead72">GDALDriverH</a> hDriver = <a class="code" href="gdal_8h.html#a115e56894fda0a51ad99820b1bc38391">GDALGetDatasetDriver</a>( hDataset );</div>
<div class="line">    <span class="keywordflow">if</span>( bJson )</div>
<div class="line">    {</div>
<div class="line">        json_object *poDescription =</div>
<div class="line">            json_object_new_string(<a class="code" href="gdal_8h.html#acf7272f513f436a95572116ca9fb8885">GDALGetDescription</a>(hDataset));</div>
<div class="line">        json_object *poDriverShortName =</div>
<div class="line">            json_object_new_string(<a class="code" href="gdal_8h.html#af02aa3ec055c39cdbc69cc55aa957280">GDALGetDriverShortName</a>(hDriver));</div>
<div class="line">        json_object *poDriverLongName =</div>
<div class="line">            json_object_new_string(<a class="code" href="gdal_8h.html#a6d9a52cd8806f02cf2f4e61463a88ada">GDALGetDriverLongName</a>(hDriver));</div>
<div class="line">        poJsonObject = json_object_new_object();</div>
<div class="line">        poBands = json_object_new_array();</div>
<div class="line">        poMetadata = json_object_new_object();</div>
<div class="line"></div>
<div class="line">        json_object_object_add(poJsonObject, <span class="stringliteral">&quot;description&quot;</span>, poDescription);</div>
<div class="line">        json_object_object_add(poJsonObject, <span class="stringliteral">&quot;driverShortName&quot;</span>,</div>
<div class="line">                               poDriverShortName);</div>
<div class="line">        json_object_object_add(poJsonObject, <span class="stringliteral">&quot;driverLongName&quot;</span>,</div>
<div class="line">                               poDriverLongName);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        Concat( osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;Driver: %s/%s\n&quot;</span>,</div>
<div class="line">                <a class="code" href="gdal_8h.html#af02aa3ec055c39cdbc69cc55aa957280">GDALGetDriverShortName</a>( hDriver ),</div>
<div class="line">                <a class="code" href="gdal_8h.html#a6d9a52cd8806f02cf2f4e61463a88ada">GDALGetDriverLongName</a>( hDriver ) );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">char</span> **papszFileList = <a class="code" href="gdal_8h.html#a3e833f20787e138cbeee23ff78ccf76d">GDALGetFileList</a>( hDataset );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( papszFileList == <span class="keyword">nullptr</span> || *papszFileList == <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            json_object *poFiles = json_object_new_array();</div>
<div class="line">            json_object_object_add(poJsonObject, <span class="stringliteral">&quot;files&quot;</span>, poFiles);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                    <span class="stringliteral">&quot;Files: none associated\n&quot;</span> );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( psOptions-&gt;bShowFileList )</div>
<div class="line">            {</div>
<div class="line">                json_object *poFiles = json_object_new_array();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; papszFileList[i] != <span class="keyword">nullptr</span>; i++ )</div>
<div class="line">                {</div>
<div class="line">                    json_object *poFile =</div>
<div class="line">                        json_object_new_string(papszFileList[i]);</div>
<div class="line"></div>
<div class="line">                    json_object_array_add(poFiles, poFile);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                json_object_object_add(poJsonObject, <span class="stringliteral">&quot;files&quot;</span>, poFiles);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                   <span class="stringliteral">&quot;Files: %s\n&quot;</span>, papszFileList[0] );</div>
<div class="line">            <span class="keywordflow">if</span>( psOptions-&gt;bShowFileList )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 1; papszFileList[i] != <span class="keyword">nullptr</span>; i++ )</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;       %s\n&quot;</span>, papszFileList[i] );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="cpl__string_8h.html#a5a39b9c5896a273cc6f06c1d5be93238">CSLDestroy</a>( papszFileList );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( bJson )</div>
<div class="line">    {</div>
<div class="line">        json_object *poSize = json_object_new_array();</div>
<div class="line">        json_object *poSizeX =</div>
<div class="line">            json_object_new_int(<a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset));</div>
<div class="line">        json_object *poSizeY =</div>
<div class="line">            json_object_new_int(<a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset));</div>
<div class="line"></div>
<div class="line">        json_object_array_add(poSize, poSizeX);</div>
<div class="line">        json_object_array_add(poSize, poSizeY);</div>
<div class="line">        json_object_object_add(poJsonObject, <span class="stringliteral">&quot;size&quot;</span>, poSize);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">               <span class="stringliteral">&quot;Size is %d, %d\n&quot;</span>,</div>
<div class="line">               <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>( hDataset ),</div>
<div class="line">               <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>( hDataset ) );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report projection.                                              */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#a639a11014cf6c4ff30df6f21d5db9da2">GDALGetProjectionRef</a>( hDataset ) != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        json_object *poCoordinateSystem = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            poCoordinateSystem = json_object_new_object();</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">char</span> *pszProjection =</div>
<div class="line">            <span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>( <a class="code" href="gdal_8h.html#a639a11014cf6c4ff30df6f21d5db9da2">GDALGetProjectionRef</a>( hDataset ) );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ogr__api_8h.html#a23361112dba57d043fa64632348c0870">OGRSpatialReferenceH</a> hSRS =</div>
<div class="line">            <a class="code" href="ogr__srs__api_8h.html#a80d2790f618a9800a126e736afb1198e">OSRNewSpatialReference</a>(<span class="keyword">nullptr</span>);</div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="ogr__srs__api_8h.html#a37a167850021c64dfec606e24a1c1e71">OSRImportFromWkt</a>( hSRS, &amp;pszProjection ) == CE_None )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> *pszPrettyWkt = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">            <a class="code" href="ogr__srs__api_8h.html#a2394b976d309aa64e2d70d87c542dae3">OSRExportToPrettyWkt</a>( hSRS, &amp;pszPrettyWkt, FALSE );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poWkt = json_object_new_string(pszPrettyWkt);</div>
<div class="line">                json_object_object_add(poCoordinateSystem, <span class="stringliteral">&quot;wkt&quot;</span>, poWkt);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                        <span class="stringliteral">&quot;Coordinate System is:\n%s\n&quot;</span>,</div>
<div class="line">                        pszPrettyWkt );</div>
<div class="line">            }</div>
<div class="line">            <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>( pszPrettyWkt );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poWkt =</div>
<div class="line">                    json_object_new_string(<a class="code" href="gdal_8h.html#a639a11014cf6c4ff30df6f21d5db9da2">GDALGetProjectionRef</a>(hDataset));</div>
<div class="line">                json_object_object_add(poCoordinateSystem, <span class="stringliteral">&quot;wkt&quot;</span>, poWkt);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                        <span class="stringliteral">&quot;Coordinate System is `%s&#39;\n&quot;</span>,</div>
<div class="line">                        <a class="code" href="gdal_8h.html#a639a11014cf6c4ff30df6f21d5db9da2">GDALGetProjectionRef</a>( hDataset ) );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( psOptions-&gt;bReportProj4 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> *pszProj4 = <span class="keyword">nullptr</span>;</div>
<div class="line">            <a class="code" href="ogr__srs__api_8h.html#ae410c0b0bb86b7d7903193828db8a1f5">OSRExportToProj4</a>( hSRS, &amp;pszProj4 );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *proj4 = json_object_new_string(pszProj4);</div>
<div class="line">                json_object_object_add(poCoordinateSystem, <span class="stringliteral">&quot;proj4&quot;</span>, proj4);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;PROJ.4 string is:\n\&#39;%s\&#39;\n&quot;</span>,pszProj4);</div>
<div class="line">            <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>( pszProj4 );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            json_object_object_add(poJsonObject, <span class="stringliteral">&quot;coordinateSystem&quot;</span>,</div>
<div class="line">                                   poCoordinateSystem);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ogr__srs__api_8h.html#aa1485e7c17fb7edc15a0dfda63f77333">OSRDestroySpatialReference</a>( hSRS );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report Geotransform.                                            */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordtype">double</span> adfGeoTransform[6] = { 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 };</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#adf94718221d264fc798043e13adf8c8f">GDALGetGeoTransform</a>( hDataset, adfGeoTransform ) == CE_None )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            json_object *poGeoTransform = json_object_new_array();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 6; i++ )</div>
<div class="line">            {</div>
<div class="line">                json_object *poGeoTransformCoefficient =</div>
<div class="line">                    json_object_new_double_with_precision(adfGeoTransform[i],</div>
<div class="line">                                                          16);</div>
<div class="line">                json_object_array_add(poGeoTransform,</div>
<div class="line">                                      poGeoTransformCoefficient);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            json_object_object_add(poJsonObject, <span class="stringliteral">&quot;geoTransform&quot;</span>,</div>
<div class="line">                                   poGeoTransform);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( adfGeoTransform[2] == 0.0 &amp;&amp; adfGeoTransform[4] == 0.0 )</div>
<div class="line">            {</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                        <span class="stringliteral">&quot;Origin = (%.15f,%.15f)\n&quot;</span>,</div>
<div class="line">                        adfGeoTransform[0], adfGeoTransform[3] );</div>
<div class="line"></div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                        <span class="stringliteral">&quot;Pixel Size = (%.15f,%.15f)\n&quot;</span>,</div>
<div class="line">                        adfGeoTransform[1], adfGeoTransform[5] );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;GeoTransform =\n&quot;</span></div>
<div class="line">                        <span class="stringliteral">&quot;  %.16g, %.16g, %.16g\n&quot;</span></div>
<div class="line">                        <span class="stringliteral">&quot;  %.16g, %.16g, %.16g\n&quot;</span>,</div>
<div class="line">                        adfGeoTransform[0],</div>
<div class="line">                        adfGeoTransform[1],</div>
<div class="line">                        adfGeoTransform[2],</div>
<div class="line">                        adfGeoTransform[3],</div>
<div class="line">                        adfGeoTransform[4],</div>
<div class="line">                        adfGeoTransform[5] );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report GCPs.                                                    */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>( psOptions-&gt;bShowGCPs &amp;&amp; <a class="code" href="gdal_8h.html#acb5f3db440085f54402d9ba842bf1fc3">GDALGetGCPCount</a>( hDataset ) &gt; 0 )</div>
<div class="line">    {</div>
<div class="line">        json_object * <span class="keyword">const</span> poGCPs = bJson ? json_object_new_object() : nullptr;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="gdal_8h.html#a9de50ea77a57cb6bc84afdc658288c08">GDALGetGCPProjection</a>(hDataset) != <span class="keyword">nullptr</span>)</div>
<div class="line">        {</div>
<div class="line">            json_object *poGCPCoordinateSystem = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">char</span> *pszProjection =</div>
<div class="line">                <span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>( <a class="code" href="gdal_8h.html#a9de50ea77a57cb6bc84afdc658288c08">GDALGetGCPProjection</a>( hDataset ) );</div>
<div class="line"></div>
<div class="line">            <a class="code" href="ogr__api_8h.html#a23361112dba57d043fa64632348c0870">OGRSpatialReferenceH</a> hSRS =</div>
<div class="line">                <a class="code" href="ogr__srs__api_8h.html#a80d2790f618a9800a126e736afb1198e">OSRNewSpatialReference</a>(<span class="keyword">nullptr</span>);</div>
<div class="line">            <span class="keywordflow">if</span>( <a class="code" href="ogr__srs__api_8h.html#a37a167850021c64dfec606e24a1c1e71">OSRImportFromWkt</a>( hSRS, &amp;pszProjection ) == CE_None )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">char</span> *pszPrettyWkt = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">                <a class="code" href="ogr__srs__api_8h.html#a2394b976d309aa64e2d70d87c542dae3">OSRExportToPrettyWkt</a>( hSRS, &amp;pszPrettyWkt, FALSE );</div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                {</div>
<div class="line">                    json_object *poWkt = json_object_new_string(pszPrettyWkt);</div>
<div class="line">                    poGCPCoordinateSystem = json_object_new_object();</div>
<div class="line"></div>
<div class="line">                    json_object_object_add(poGCPCoordinateSystem, <span class="stringliteral">&quot;wkt&quot;</span>, poWkt);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;GCP Projection = \n%s\n&quot;</span>, pszPrettyWkt );</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>( pszPrettyWkt );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                {</div>
<div class="line">                    json_object *poWkt =</div>
<div class="line">                        json_object_new_string(<a class="code" href="gdal_8h.html#a9de50ea77a57cb6bc84afdc658288c08">GDALGetGCPProjection</a>(hDataset));</div>
<div class="line">                    poGCPCoordinateSystem = json_object_new_object();</div>
<div class="line"></div>
<div class="line">                    json_object_object_add(poGCPCoordinateSystem, <span class="stringliteral">&quot;wkt&quot;</span>, poWkt);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;GCP Projection = %s\n&quot;</span>,</div>
<div class="line">                           <a class="code" href="gdal_8h.html#a9de50ea77a57cb6bc84afdc658288c08">GDALGetGCPProjection</a>( hDataset ) );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                json_object_object_add(poGCPs, <span class="stringliteral">&quot;coordinateSystem&quot;</span>,</div>
<div class="line">                                       poGCPCoordinateSystem);</div>
<div class="line">            <a class="code" href="ogr__srs__api_8h.html#aa1485e7c17fb7edc15a0dfda63f77333">OSRDestroySpatialReference</a>( hSRS );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        json_object * <span class="keyword">const</span> poGCPList = bJson ? json_object_new_array() : nullptr;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="gdal_8h.html#acb5f3db440085f54402d9ba842bf1fc3">GDALGetGCPCount</a>(hDataset); i++ )</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="structGDAL__GCP.html">GDAL_GCP</a> *psGCP = <a class="code" href="gdal_8h.html#ac301b5c545843cf2ef672a831153d1e3">GDALGetGCPs</a>( hDataset ) + i;</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poGCP = json_object_new_object();</div>
<div class="line">                json_object *poId = json_object_new_string(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a4c55454dff1c5afdc9bf694cb8df4c44">pszId</a>);</div>
<div class="line">                json_object *poInfo = json_object_new_string(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a5e2eae804b1b0f8624296a842fae5cbe">pszInfo</a>);</div>
<div class="line">                json_object *poPixel =</div>
<div class="line">                    json_object_new_double_with_precision(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a7decb3a8e3b74aa459a17d32ad3aa833">dfGCPPixel</a>,</div>
<div class="line">                                                          15);</div>
<div class="line">                json_object *poLine =</div>
<div class="line">                    json_object_new_double_with_precision(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a043663a215080d041c5c7fc119a6b40c">dfGCPLine</a>, 15);</div>
<div class="line">                json_object *poX =</div>
<div class="line">                    json_object_new_double_with_precision(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a29b69cc336f53200d76b60c6623d5f05">dfGCPX</a>, 15);</div>
<div class="line">                json_object *poY =</div>
<div class="line">                    json_object_new_double_with_precision(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a967a0176f77fcb3c34ec03e0466ef8d3">dfGCPY</a>, 15);</div>
<div class="line">                json_object *poZ =</div>
<div class="line">                    json_object_new_double_with_precision(psGCP-&gt;<a class="code" href="structGDAL__GCP.html#acf473127a49883c0506671a5f6ba9f5a">dfGCPZ</a>, 15);</div>
<div class="line"></div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;id&quot;</span>, poId);</div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;info&quot;</span>, poInfo);</div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;pixel&quot;</span>, poPixel);</div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;line&quot;</span>, poLine);</div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;x&quot;</span>, poX);</div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;y&quot;</span>, poY);</div>
<div class="line">                json_object_object_add(poGCP, <span class="stringliteral">&quot;z&quot;</span>, poZ);</div>
<div class="line">                json_object_array_add(poGCPList, poGCP);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;GCP[%3d]: Id=%s, Info=%s\n&quot;</span></div>
<div class="line">                       <span class="stringliteral">&quot;          (%.15g,%.15g) -&gt; (%.15g,%.15g,%.15g)\n&quot;</span>,</div>
<div class="line">                    i, psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a4c55454dff1c5afdc9bf694cb8df4c44">pszId</a>, psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a5e2eae804b1b0f8624296a842fae5cbe">pszInfo</a>,</div>
<div class="line">                    psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a7decb3a8e3b74aa459a17d32ad3aa833">dfGCPPixel</a>, psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a043663a215080d041c5c7fc119a6b40c">dfGCPLine</a>,</div>
<div class="line">                    psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a29b69cc336f53200d76b60c6623d5f05">dfGCPX</a>, psGCP-&gt;<a class="code" href="structGDAL__GCP.html#a967a0176f77fcb3c34ec03e0466ef8d3">dfGCPY</a>, psGCP-&gt;<a class="code" href="structGDAL__GCP.html#acf473127a49883c0506671a5f6ba9f5a">dfGCPZ</a> );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            json_object_object_add(poGCPs, <span class="stringliteral">&quot;gcpList&quot;</span>, poGCPList);</div>
<div class="line">            json_object_object_add(poJsonObject, <span class="stringliteral">&quot;gcps&quot;</span>, poGCPs);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report metadata.                                                */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"></div>
<div class="line">    GDALInfoReportMetadata( psOptions, hDataset, <span class="keyword">false</span>,</div>
<div class="line">                            bJson, poMetadata, osStr );</div>
<div class="line">    <span class="keywordflow">if</span>( bJson )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( psOptions-&gt;bShowMetadata )</div>
<div class="line">            json_object_object_add( poJsonObject, <span class="stringliteral">&quot;metadata&quot;</span>, poMetadata );</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            json_object_put(poMetadata);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Setup projected to lat/long transform if appropriate.           */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>  *pszProjection = <span class="keyword">nullptr</span>;</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#adf94718221d264fc798043e13adf8c8f">GDALGetGeoTransform</a>( hDataset, adfGeoTransform ) == CE_None )</div>
<div class="line">        pszProjection = <a class="code" href="gdal_8h.html#a639a11014cf6c4ff30df6f21d5db9da2">GDALGetProjectionRef</a>(hDataset);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="ogr__api_8h.html#a069f206f0e8e54328d648c14658cbf81">OGRCoordinateTransformationH</a> hTransform = <span class="keyword">nullptr</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> bTransformToWGS84 = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( pszProjection != <span class="keyword">nullptr</span> &amp;&amp; strlen(pszProjection) &gt; 0 )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="ogr__api_8h.html#a23361112dba57d043fa64632348c0870">OGRSpatialReferenceH</a> hLatLong = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ogr__api_8h.html#a23361112dba57d043fa64632348c0870">OGRSpatialReferenceH</a> hProj = <a class="code" href="ogr__srs__api_8h.html#a80d2790f618a9800a126e736afb1198e">OSRNewSpatialReference</a>( pszProjection );</div>
<div class="line">        <span class="keywordflow">if</span>( hProj != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="ogr__core_8h.html#abd3e8d61c1e766992bdc71f846d56f65">OGRErr</a> eErr = <a class="code" href="ogr__core_8h.html#a67a14d8dceb15392134cc51180c5e6f0">OGRERR_NONE</a>;</div>
<div class="line">            <span class="comment">// Check that it looks like Earth before trying to reproject to wgs84...</span></div>
<div class="line">            <span class="keywordflow">if</span>(bJson &amp;&amp;</div>
<div class="line">               fabs( <a class="code" href="ogr__srs__api_8h.html#aa7f8b84bb6d99e04f362ae1b2590ca33">OSRGetSemiMajor</a>(hProj, &amp;eErr) - 6378137.0) &lt; 10000.0 &amp;&amp;</div>
<div class="line">               eErr == <a class="code" href="ogr__core_8h.html#a67a14d8dceb15392134cc51180c5e6f0">OGRERR_NONE</a> )</div>
<div class="line">            {</div>
<div class="line">                bTransformToWGS84 = <span class="keyword">true</span>;</div>
<div class="line">                hLatLong = <a class="code" href="ogr__srs__api_8h.html#a80d2790f618a9800a126e736afb1198e">OSRNewSpatialReference</a>( <span class="keyword">nullptr</span> );</div>
<div class="line">                <a class="code" href="ogr__srs__api_8h.html#a2384a6dfde010f936aa7890c68cc7790">OSRSetWellKnownGeogCS</a>( hLatLong, <span class="stringliteral">&quot;WGS84&quot;</span> );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                hLatLong = <a class="code" href="ogr__srs__api_8h.html#af0b203dd5d7f6d635e82afe9b5d4aae4">OSRCloneGeogCS</a>( hProj );</div>
<div class="line">                <span class="keywordflow">if</span>( hLatLong )</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Drop GEOGCS|UNIT child to be sure to output as degrees</span></div>
<div class="line">                    <a class="code" href="classOGRSpatialReference.html">OGRSpatialReference</a>* poLatLong = <span class="keyword">reinterpret_cast&lt;</span></div>
<div class="line">                        <a class="code" href="classOGRSpatialReference.html">OGRSpatialReference</a>*<span class="keyword">&gt;</span>(hLatLong);</div>
<div class="line">                    <a class="code" href="classOGR__SRSNode.html">OGR_SRSNode</a> *poGEOGCS = poLatLong-&gt;<a class="code" href="classOGRSpatialReference.html#afd2dca44c9130416bc5ea545ad3378dd">GetRoot</a>();</div>
<div class="line">                    <span class="keywordflow">if</span>( poGEOGCS )</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keyword">const</span> <span class="keywordtype">int</span> iUnitChild =</div>
<div class="line">                            poGEOGCS-&gt;<a class="code" href="classOGR__SRSNode.html#a047ce17a7a2f76ab0a6c4c7f5cab06a9">FindChild</a>(<span class="stringliteral">&quot;UNIT&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">if</span>( iUnitChild != -1 )</div>
<div class="line">                            poGEOGCS-&gt;<a class="code" href="classOGR__SRSNode.html#ad292fa90c3d86e79a7dcc0d1ed7bfa72">DestroyChild</a>(iUnitChild);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( hLatLong != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="cpl__error_8h.html#ad13c9c8f2037ddfd566c2a197f7b2537">CPLPushErrorHandler</a>( <a class="code" href="cpl__error_8h.html#adf8bbff86c116624fb84e8b0e7dfc156">CPLQuietErrorHandler</a> );</div>
<div class="line">            hTransform = <a class="code" href="ogr__srs__api_8h.html#ad5dcfadd510aa2a3720ffd544841b85a">OCTNewCoordinateTransformation</a>( hProj, hLatLong );</div>
<div class="line">            <a class="code" href="cpl__error_8h.html#ac6c7c393c94b210e4be999f34fcb6680">CPLPopErrorHandler</a>();</div>
<div class="line"></div>
<div class="line">            <a class="code" href="ogr__srs__api_8h.html#aa1485e7c17fb7edc15a0dfda63f77333">OSRDestroySpatialReference</a>( hLatLong );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( hProj != <span class="keyword">nullptr</span> )</div>
<div class="line">            <a class="code" href="ogr__srs__api_8h.html#aa1485e7c17fb7edc15a0dfda63f77333">OSRDestroySpatialReference</a>( hProj );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report corners.                                                 */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>( bJson )</div>
<div class="line">    {</div>
<div class="line">        json_object *poLinearRing = json_object_new_array();</div>
<div class="line">        json_object *poCornerCoordinates = json_object_new_object();</div>
<div class="line">        json_object *poLongLatExtent = json_object_new_object();</div>
<div class="line">        json_object *poLongLatExtentType = json_object_new_string(<span class="stringliteral">&quot;Polygon&quot;</span>);</div>
<div class="line">        json_object *poLongLatExtentCoordinates = json_object_new_array();</div>
<div class="line"></div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;upperLeft&quot;</span>,</div>
<div class="line">                              0.0, 0.0, bJson, poCornerCoordinates,</div>
<div class="line">                              poLongLatExtentCoordinates, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;lowerLeft&quot;</span>,</div>
<div class="line">                              0.0, <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset), bJson,</div>
<div class="line">                              poCornerCoordinates, poLongLatExtentCoordinates,</div>
<div class="line">                              osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;lowerRight&quot;</span>,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset),</div>
<div class="line">                              <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset),</div>
<div class="line">                              bJson, poCornerCoordinates,</div>
<div class="line">                              poLongLatExtentCoordinates, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;upperRight&quot;</span>,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset), 0.0, bJson,</div>
<div class="line">                              poCornerCoordinates, poLongLatExtentCoordinates,</div>
<div class="line">                              osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;center&quot;</span>,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset) / 2.0,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset) / 2.0,</div>
<div class="line">                              bJson, poCornerCoordinates,</div>
<div class="line">                              poLongLatExtentCoordinates, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;upperLeft&quot;</span>,</div>
<div class="line">                              0.0, 0.0, bJson, poCornerCoordinates,</div>
<div class="line">                              poLongLatExtentCoordinates, osStr );</div>
<div class="line"></div>
<div class="line">        json_object_object_add( poJsonObject, <span class="stringliteral">&quot;cornerCoordinates&quot;</span>,</div>
<div class="line">                                poCornerCoordinates );</div>
<div class="line">        json_object_object_add( poLongLatExtent, <span class="stringliteral">&quot;type&quot;</span>, poLongLatExtentType );</div>
<div class="line">        json_object_array_add( poLinearRing, poLongLatExtentCoordinates );</div>
<div class="line">        json_object_object_add( poLongLatExtent, <span class="stringliteral">&quot;coordinates&quot;</span>, poLinearRing );</div>
<div class="line">        json_object_object_add( poJsonObject,</div>
<div class="line">                bTransformToWGS84 ? <span class="stringliteral">&quot;wgs84Extent&quot;</span>: <span class="stringliteral">&quot;extent&quot;</span>, poLongLatExtent );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;Corner Coordinates:\n&quot;</span> );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;Upper Left&quot;</span>,</div>
<div class="line">                              0.0, 0.0, bJson, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;Lower Left&quot;</span>,</div>
<div class="line">                              0.0, <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset), bJson,</div>
<div class="line">                              <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;Upper Right&quot;</span>,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset), 0.0, bJson,</div>
<div class="line">                              <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;Lower Right&quot;</span>,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset),</div>
<div class="line">                              <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset), bJson,</div>
<div class="line">                              <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, osStr );</div>
<div class="line">        GDALInfoReportCorner( psOptions, hDataset, hTransform,</div>
<div class="line">                              <span class="stringliteral">&quot;Center&quot;</span>,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset)/2.0,</div>
<div class="line">                              <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset)/2.0, bJson,</div>
<div class="line">                              <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, osStr );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( hTransform != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="ogr__srs__api_8h.html#a3cb8a7c62b5228322bf4ae2550eaf364">OCTDestroyCoordinateTransformation</a>( hTransform );</div>
<div class="line">        hTransform = <span class="keyword">nullptr</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* ==================================================================== */</span></div>
<div class="line"><span class="comment">/*      Loop over bands.                                                */</span></div>
<div class="line"><span class="comment">/* ==================================================================== */</span></div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iBand = 0; iBand &lt; <a class="code" href="gdal_8h.html#a1b9f888aac1cb4dbc99dc1dc023174b7">GDALGetRasterCount</a>( hDataset ); iBand++ )</div>
<div class="line">    {</div>
<div class="line">        json_object *poBand = <span class="keyword">nullptr</span>;</div>
<div class="line">        json_object *poBandMetadata = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            poBand = json_object_new_object();</div>
<div class="line">            poBandMetadata = json_object_new_object();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="gdal_8h.html#aeef8194c3ad5f1ed6ca27ea4cce24685">GDALRasterBandH</a> <span class="keyword">const</span> hBand = <a class="code" href="gdal_8h.html#a2a74e5e34528589303c1521ebfb9c162">GDALGetRasterBand</a>( hDataset, iBand+1 );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( psOptions-&gt;bSample )</div>
<div class="line">        {</div>
<div class="line">            vector&lt;float&gt; ofSample(10000, 0);</div>
<div class="line">            <span class="keywordtype">float</span> * <span class="keyword">const</span> pafSample = &amp;ofSample[0];</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">int</span> nCount =</div>
<div class="line">                <a class="code" href="gdal_8h.html#a0a04a2c6d597fa073bec5d7976716d49">GDALGetRandomRasterSample</a>( hBand, 10000, pafSample );</div>
<div class="line">            <span class="keywordflow">if</span>( !bJson )</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                        <span class="stringliteral">&quot;Got %d samples.\n&quot;</span>, nCount );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">int</span> nBlockXSize = 0;</div>
<div class="line">        <span class="keywordtype">int</span> nBlockYSize = 0;</div>
<div class="line">        <a class="code" href="gdal_8h.html#a174cd06c70a4534f4f00d0427f77f45a">GDALGetBlockSize</a>( hBand, &amp;nBlockXSize, &amp;nBlockYSize );</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            json_object *poBandNumber = json_object_new_int(iBand+1);</div>
<div class="line">            json_object *poBlock = json_object_new_array();</div>
<div class="line">            json_object *poType =</div>
<div class="line">                json_object_new_string(</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a33b543bd0b1e36598abb7fa9fd39add7">GDALGetDataTypeName</a>(<a class="code" href="gdal_8h.html#a2edba2a096915aa63e7ca0bf4c383bd0">GDALGetRasterDataType</a>(hBand)));</div>
<div class="line">            json_object *poColorInterp =</div>
<div class="line">                json_object_new_string(</div>
<div class="line">                    <a class="code" href="gdal_8h.html#ad22541da614932e0c34028fe6fc08074">GDALGetColorInterpretationName</a>(</div>
<div class="line">                        <a class="code" href="gdal_8h.html#aec13128878a5f4e4a96605c4b6c71d6f">GDALGetRasterColorInterpretation</a>(hBand)));</div>
<div class="line"></div>
<div class="line">            json_object_array_add(poBlock, json_object_new_int(nBlockXSize));</div>
<div class="line">            json_object_array_add(poBlock, json_object_new_int(nBlockYSize));</div>
<div class="line">            json_object_object_add(poBand, <span class="stringliteral">&quot;band&quot;</span>, poBandNumber);</div>
<div class="line">            json_object_object_add(poBand, <span class="stringliteral">&quot;block&quot;</span>, poBlock);</div>
<div class="line">            json_object_object_add(poBand, <span class="stringliteral">&quot;type&quot;</span>, poType);</div>
<div class="line">            json_object_object_add(poBand, <span class="stringliteral">&quot;colorInterpretation&quot;</span>,</div>
<div class="line">                                   poColorInterp);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                    <span class="stringliteral">&quot;Band %d Block=%dx%d Type=%s, ColorInterp=%s\n&quot;</span>,</div>
<div class="line">                    iBand + 1,</div>
<div class="line">                    nBlockXSize, nBlockYSize,</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a33b543bd0b1e36598abb7fa9fd39add7">GDALGetDataTypeName</a>(</div>
<div class="line">                        <a class="code" href="gdal_8h.html#a2edba2a096915aa63e7ca0bf4c383bd0">GDALGetRasterDataType</a>(hBand)),</div>
<div class="line">                    <a class="code" href="gdal_8h.html#ad22541da614932e0c34028fe6fc08074">GDALGetColorInterpretationName</a>(</div>
<div class="line">                        <a class="code" href="gdal_8h.html#aec13128878a5f4e4a96605c4b6c71d6f">GDALGetRasterColorInterpretation</a>(hBand)) );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#acf7272f513f436a95572116ca9fb8885">GDALGetDescription</a>( hBand ) != <span class="keyword">nullptr</span></div>
<div class="line">            &amp;&amp; strlen(<a class="code" href="gdal_8h.html#acf7272f513f436a95572116ca9fb8885">GDALGetDescription</a>( hBand )) &gt; 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">            {</div>
<div class="line">                json_object *poBandDescription =</div>
<div class="line">                    json_object_new_string(<a class="code" href="gdal_8h.html#acf7272f513f436a95572116ca9fb8885">GDALGetDescription</a>(hBand));</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;description&quot;</span>,</div>
<div class="line">                                       poBandDescription);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;  Description = %s\n&quot;</span>,</div>
<div class="line">                        <a class="code" href="gdal_8h.html#acf7272f513f436a95572116ca9fb8885">GDALGetDescription</a>(hBand) );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> bGotMin = FALSE;</div>
<div class="line">            <span class="keywordtype">int</span> bGotMax = FALSE;</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">double</span> dfMin = <a class="code" href="gdal_8h.html#a3a2e32244e8e906238171efa0af767ba">GDALGetRasterMinimum</a>( hBand, &amp;bGotMin );</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">double</span> dfMax = <a class="code" href="gdal_8h.html#a403a61b92434a77717488915a5e615cb">GDALGetRasterMaximum</a>( hBand, &amp;bGotMax );</div>
<div class="line">            <span class="keywordflow">if</span>( bGotMin || bGotMax || psOptions-&gt;bComputeMinMax )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( !bJson )</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;  &quot;</span> );</div>
<div class="line">                <span class="keywordflow">if</span>( bGotMin )</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                    {</div>
<div class="line">                        json_object *poMin =</div>
<div class="line">                            json_object_new_double_with_precision(dfMin, 3);</div>
<div class="line">                        json_object_object_add(poBand, <span class="stringliteral">&quot;min&quot;</span>, poMin);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                               <span class="stringliteral">&quot;Min=%.3f &quot;</span>, dfMin );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>( bGotMax )</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                    {</div>
<div class="line">                        json_object *poMax =</div>
<div class="line">                            json_object_new_double_with_precision(dfMax, 3);</div>
<div class="line">                        json_object_object_add(poBand, <span class="stringliteral">&quot;max&quot;</span>, poMax);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                               <span class="stringliteral">&quot;Max=%.3f &quot;</span>, dfMax );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( psOptions-&gt;bComputeMinMax )</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="cpl__error_8h.html#a29626fd8fdb658b19439beeb73a59560">CPLErrorReset</a>();</div>
<div class="line">                    <span class="keywordtype">double</span> adfCMinMax[2] = {0.0, 0.0};</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a2b36986db233e04861c43a6d3ae893e2">GDALComputeRasterMinMax</a>( hBand, FALSE, adfCMinMax );</div>
<div class="line">                    <span class="keywordflow">if</span>( <a class="code" href="cpl__error_8h.html#a8df0d4e01034cf79202314c92251e920">CPLGetLastErrorType</a>() == CE_None )</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                        {</div>
<div class="line">                            json_object *poComputedMin =</div>
<div class="line">                                json_object_new_double_with_precision(</div>
<div class="line">                                    adfCMinMax[0], 3);</div>
<div class="line">                            json_object *poComputedMax =</div>
<div class="line">                                json_object_new_double_with_precision(</div>
<div class="line">                                    adfCMinMax[1], 3);</div>
<div class="line">                            json_object_object_add(poBand, <span class="stringliteral">&quot;computedMin&quot;</span>,</div>
<div class="line">                                                   poComputedMin);</div>
<div class="line">                            json_object_object_add(poBand, <span class="stringliteral">&quot;computedMax&quot;</span>,</div>
<div class="line">                                                   poComputedMax);</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                                   <span class="stringliteral">&quot;  Computed Min/Max=%.3f,%.3f&quot;</span>,</div>
<div class="line">                                   adfCMinMax[0], adfCMinMax[1] );</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>(!bJson)</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">double</span> dfMinStat = 0.0;</div>
<div class="line">        <span class="keywordtype">double</span> dfMaxStat = 0.0;</div>
<div class="line">        <span class="keywordtype">double</span> dfMean = 0.0;</div>
<div class="line">        <span class="keywordtype">double</span> dfStdDev = 0.0;</div>
<div class="line">        <a class="code" href="cpl__error_8h.html#a463ba7c7202a505416ff95b1aeefa2de">CPLErr</a> eErr = <a class="code" href="gdal_8h.html#a1d38e0b3838bda973ee40de58fc70f87">GDALGetRasterStatistics</a>( hBand, psOptions-&gt;bApproxStats,</div>
<div class="line">                                               psOptions-&gt;bStats,</div>
<div class="line">                                               &amp;dfMinStat, &amp;dfMaxStat,</div>
<div class="line">                                               &amp;dfMean, &amp;dfStdDev );</div>
<div class="line">        <span class="keywordflow">if</span>( eErr == CE_None )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poMinimum =</div>
<div class="line">                    json_object_new_double_with_precision(dfMinStat, 3);</div>
<div class="line">                json_object *poMaximum =</div>
<div class="line">                    json_object_new_double_with_precision(dfMaxStat, 3);</div>
<div class="line">                json_object *poMean =</div>
<div class="line">                    json_object_new_double_with_precision(dfMean, 3);</div>
<div class="line">                json_object *poStdDev =</div>
<div class="line">                    json_object_new_double_with_precision(dfStdDev, 3);</div>
<div class="line"></div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;minimum&quot;</span>, poMinimum);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;maximum&quot;</span>, poMaximum);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;mean&quot;</span>, poMean);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;stdDev&quot;</span>, poStdDev);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;  Minimum=%.3f, Maximum=%.3f, Mean=%.3f, StdDev=%.3f\n&quot;</span>,</div>
<div class="line">                       dfMinStat, dfMaxStat, dfMean, dfStdDev );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( psOptions-&gt;bReportHistograms )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> nBucketCount = 0;</div>
<div class="line">            <a class="code" href="cpl__port_8h.html#a4f0794a0fb78d55ba284a414191dbc93">GUIntBig</a> *panHistogram = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                eErr = <a class="code" href="gdal_8h.html#a5be15f16a6667b899b72bbdc62db7bc6">GDALGetDefaultHistogramEx</a>( hBand, &amp;dfMinStat, &amp;dfMaxStat,</div>
<div class="line">                                                  &amp;nBucketCount, &amp;panHistogram,</div>
<div class="line">                                                  TRUE, GDALDummyProgress,</div>
<div class="line">                                                  <span class="keyword">nullptr</span> );</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                eErr = <a class="code" href="gdal_8h.html#a5be15f16a6667b899b72bbdc62db7bc6">GDALGetDefaultHistogramEx</a>( hBand, &amp;dfMinStat, &amp;dfMaxStat,</div>
<div class="line">                                                  &amp;nBucketCount, &amp;panHistogram,</div>
<div class="line">                                                  TRUE, GDALTermProgress,</div>
<div class="line">                                                  <span class="keyword">nullptr</span> );</div>
<div class="line">            <span class="keywordflow">if</span>( eErr == CE_None )</div>
<div class="line">            {</div>
<div class="line">                json_object *poHistogram = <span class="keyword">nullptr</span>;</div>
<div class="line">                json_object *poBuckets = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                {</div>
<div class="line">                    json_object *poCount = json_object_new_int(nBucketCount);</div>
<div class="line">                    json_object *poMin = json_object_new_double(dfMinStat);</div>
<div class="line">                    json_object *poMax = json_object_new_double(dfMaxStat);</div>
<div class="line"></div>
<div class="line">                    poBuckets = json_object_new_array();</div>
<div class="line">                    poHistogram = json_object_new_object();</div>
<div class="line">                    json_object_object_add(poHistogram, <span class="stringliteral">&quot;count&quot;</span>, poCount);</div>
<div class="line">                    json_object_object_add(poHistogram, <span class="stringliteral">&quot;min&quot;</span>, poMin);</div>
<div class="line">                    json_object_object_add(poHistogram, <span class="stringliteral">&quot;max&quot;</span>, poMax);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;  %d buckets from %g to %g:\n  &quot;</span>,</div>
<div class="line">                           nBucketCount, dfMinStat, dfMaxStat );</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iBucket = 0; iBucket &lt; nBucketCount; iBucket++ )</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                    {</div>
<div class="line">                        json_object *poBucket =</div>
<div class="line">                            json_object_new_int64(panHistogram[iBucket]);</div>
<div class="line">                        json_object_array_add(poBuckets, poBucket);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                               <a class="code" href="cpl__port_8h.html#a2cd7ccbf5388e3fad5b0854065ed0828">CPL_FRMT_GUIB</a> <span class="stringliteral">&quot; &quot;</span>, panHistogram[iBucket] );</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                {</div>
<div class="line">                    json_object_object_add(poHistogram, <span class="stringliteral">&quot;buckets&quot;</span>, poBuckets);</div>
<div class="line">                    json_object_object_add(poBand, <span class="stringliteral">&quot;histogram&quot;</span>, poHistogram);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>( panHistogram );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( psOptions-&gt;bComputeChecksum)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">int</span> nBandChecksum =</div>
<div class="line">                <a class="code" href="gdal__alg_8h.html#abe2846ac3a350c24f07dc9ceac8f4d14">GDALChecksumImage</a>(hBand, 0, 0,</div>
<div class="line">                                  <a class="code" href="gdal_8h.html#a4ef08b38a70b6e04f25a81bd82ef0138">GDALGetRasterXSize</a>(hDataset),</div>
<div class="line">                                  <a class="code" href="gdal_8h.html#ae0c0af31441c6bac994f35ac26c82f99">GDALGetRasterYSize</a>(hDataset));</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poChecksum = json_object_new_int(nBandChecksum);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;checksum&quot;</span>, poChecksum);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;  Checksum=%d\n&quot;</span>, nBandChecksum );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">int</span> bGotNodata = FALSE;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> dfNoData = <a class="code" href="gdal_8h.html#a087441349e8ce2285c405fabf662aeaf">GDALGetRasterNoDataValue</a>( hBand, &amp;bGotNodata );</div>
<div class="line">        <span class="keywordflow">if</span>( bGotNodata )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( CPLIsNan(dfNoData) )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                {</div>
<div class="line">                    json_object *poNoDataValue = json_object_new_string(<span class="stringliteral">&quot;nan&quot;</span>);</div>
<div class="line">                    json_object_object_add(poBand, <span class="stringliteral">&quot;noDataValue&quot;</span>,</div>
<div class="line">                                           poNoDataValue);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;  NoData Value=nan\n&quot;</span> );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                {</div>
<div class="line">                    json_object *poNoDataValue =</div>
<div class="line">                        json_object_new_double_with_precision(dfNoData, 18);</div>
<div class="line">                    json_object_object_add(poBand, <span class="stringliteral">&quot;noDataValue&quot;</span>,</div>
<div class="line">                                           poNoDataValue);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;  NoData Value=%.18g\n&quot;</span>, dfNoData );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#a16b185b8a771a65cc26077e3b54887bc">GDALGetOverviewCount</a>(hBand) &gt; 0 )</div>
<div class="line">        {</div>
<div class="line">            json_object *poOverviews = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                poOverviews = json_object_new_array();</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;  Overviews: &quot;</span> );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iOverview = 0;</div>
<div class="line">                 iOverview &lt; <a class="code" href="gdal_8h.html#a16b185b8a771a65cc26077e3b54887bc">GDALGetOverviewCount</a>(hBand);</div>
<div class="line">                 iOverview++ )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( !bJson )</div>
<div class="line">                    <span class="keywordflow">if</span>( iOverview != 0 )</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;, &quot;</span> );</div>
<div class="line"></div>
<div class="line">                <a class="code" href="gdal_8h.html#aeef8194c3ad5f1ed6ca27ea4cce24685">GDALRasterBandH</a> hOverview = <a class="code" href="gdal_8h.html#a00bba92f9b0c9e56e724ed07aca451b1">GDALGetOverview</a>( hBand, iOverview );</div>
<div class="line">                <span class="keywordflow">if</span> (hOverview != <span class="keyword">nullptr</span>)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                    {</div>
<div class="line">                        json_object *poOverviewSize = json_object_new_array();</div>
<div class="line">                        json_object *poOverviewSizeX =</div>
<div class="line">                            json_object_new_int(</div>
<div class="line">                                <a class="code" href="gdal_8h.html#a25c74f44562ceb26b2efe2f1f28f9b5f">GDALGetRasterBandXSize</a>( hOverview) );</div>
<div class="line">                        json_object *poOverviewSizeY =</div>
<div class="line">                            json_object_new_int(</div>
<div class="line">                                <a class="code" href="gdal_8h.html#a73b9be134e720404e06942dac6f4006e">GDALGetRasterBandYSize</a>( hOverview) );</div>
<div class="line"></div>
<div class="line">                        json_object *poOverview = json_object_new_object();</div>
<div class="line">                        json_object_array_add( poOverviewSize,</div>
<div class="line">                                               poOverviewSizeX );</div>
<div class="line">                        json_object_array_add( poOverviewSize,</div>
<div class="line">                                               poOverviewSizeY );</div>
<div class="line">                        json_object_object_add( poOverview, <span class="stringliteral">&quot;size&quot;</span>,</div>
<div class="line">                                                poOverviewSize );</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(psOptions-&gt;bComputeChecksum)</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keyword">const</span> <span class="keywordtype">int</span> nOverviewChecksum =</div>
<div class="line">                                <a class="code" href="gdal__alg_8h.html#abe2846ac3a350c24f07dc9ceac8f4d14">GDALChecksumImage</a>(</div>
<div class="line">                                    hOverview, 0, 0,</div>
<div class="line">                                    <a class="code" href="gdal_8h.html#a25c74f44562ceb26b2efe2f1f28f9b5f">GDALGetRasterBandXSize</a>(hOverview),</div>
<div class="line">                                    <a class="code" href="gdal_8h.html#a73b9be134e720404e06942dac6f4006e">GDALGetRasterBandYSize</a>(hOverview));</div>
<div class="line">                            json_object *poOverviewChecksum =</div>
<div class="line">                                json_object_new_int(nOverviewChecksum);</div>
<div class="line">                            json_object_object_add(poOverview, <span class="stringliteral">&quot;checksum&quot;</span>,</div>
<div class="line">                                                   poOverviewChecksum);</div>
<div class="line">                        }</div>
<div class="line">                        json_object_array_add(poOverviews, poOverview);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%dx%d&quot;</span>,</div>
<div class="line">                            <a class="code" href="gdal_8h.html#a25c74f44562ceb26b2efe2f1f28f9b5f">GDALGetRasterBandXSize</a>( hOverview ),</div>
<div class="line">                            <a class="code" href="gdal_8h.html#a73b9be134e720404e06942dac6f4006e">GDALGetRasterBandYSize</a>( hOverview ) );</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">char</span> *pszResampling =</div>
<div class="line">                         <a class="code" href="gdal_8h.html#ac24dd49918d985568fa2d97da1080215">GDALGetMetadataItem</a>( hOverview, <span class="stringliteral">&quot;RESAMPLING&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>( pszResampling != <span class="keyword">nullptr</span> &amp;&amp; !bJson</div>
<div class="line">                        &amp;&amp; <a class="code" href="cpl__port_8h.html#afbc02be985c2bb8451a765ad38b9dc8c">STARTS_WITH_CI</a>(pszResampling, <span class="stringliteral">&quot;AVERAGE_BIT2&quot;</span>) )</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;*&quot;</span> );</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>(!bJson)</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;(null)&quot;</span> );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;overviews&quot;</span>, poOverviews);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ( psOptions-&gt;bComputeChecksum &amp;&amp; !bJson )</div>
<div class="line">            {</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;  Overviews checksum: &quot;</span> );</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iOverview = 0;</div>
<div class="line">                     iOverview &lt; <a class="code" href="gdal_8h.html#a16b185b8a771a65cc26077e3b54887bc">GDALGetOverviewCount</a>(hBand);</div>
<div class="line">                     iOverview++ )</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="gdal_8h.html#aeef8194c3ad5f1ed6ca27ea4cce24685">GDALRasterBandH</a> hOverview;</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>( iOverview != 0 )</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;, &quot;</span> );</div>
<div class="line"></div>
<div class="line">                    hOverview = <a class="code" href="gdal_8h.html#a00bba92f9b0c9e56e724ed07aca451b1">GDALGetOverview</a>( hBand, iOverview );</div>
<div class="line">                    <span class="keywordflow">if</span> (hOverview)</div>
<div class="line">                    {</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%d&quot;</span>,</div>
<div class="line">                                <a class="code" href="gdal__alg_8h.html#abe2846ac3a350c24f07dc9ceac8f4d14">GDALChecksumImage</a>(hOverview, 0, 0,</div>
<div class="line">                                        <a class="code" href="gdal_8h.html#a25c74f44562ceb26b2efe2f1f28f9b5f">GDALGetRasterBandXSize</a>(hOverview),</div>
<div class="line">                                        <a class="code" href="gdal_8h.html#a73b9be134e720404e06942dac6f4006e">GDALGetRasterBandYSize</a>(hOverview)));</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;(null)&quot;</span> );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#a2325e6a7b5d3bf0e3add14aa87c32458">GDALHasArbitraryOverviews</a>( hBand ) &amp;&amp; !bJson )</div>
<div class="line">        {</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                   <span class="stringliteral">&quot;  Overviews: arbitrary\n&quot;</span> );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> nMaskFlags = <a class="code" href="gdal_8h.html#a141da7f47d259657ee9ee41be40a39ee">GDALGetMaskFlags</a>( hBand );</div>
<div class="line">        <span class="keywordflow">if</span>( (nMaskFlags &amp; (<a class="code" href="gdal_8h.html#adf04f967cbdd72c3953d7b1ffe1eeae2">GMF_NODATA</a>|<a class="code" href="gdal_8h.html#a92ab90884cf9d112008100e69f751ecc">GMF_ALL_VALID</a>)) == 0 ||</div>
<div class="line">             nMaskFlags == (<a class="code" href="gdal_8h.html#adf04f967cbdd72c3953d7b1ffe1eeae2">GMF_NODATA</a> | <a class="code" href="gdal_8h.html#a2375556d7f922fb4bffb0dda7a6cc7ea">GMF_PER_DATASET</a>) )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="gdal_8h.html#aeef8194c3ad5f1ed6ca27ea4cce24685">GDALRasterBandH</a> hMaskBand = <a class="code" href="gdal_8h.html#a30a5a6cb5ca4715ce347239c5fc89831">GDALGetMaskBand</a>(hBand) ;</div>
<div class="line">            json_object *poMask = <span class="keyword">nullptr</span>;</div>
<div class="line">            json_object *poFlags = <span class="keyword">nullptr</span>;</div>
<div class="line">            json_object *poMaskOverviews = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">            {</div>
<div class="line">                poMask = json_object_new_object();</div>
<div class="line">                poFlags = json_object_new_array();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;  Mask Flags: &quot;</span> );</div>
<div class="line">            <span class="keywordflow">if</span>( nMaskFlags &amp; <a class="code" href="gdal_8h.html#a2375556d7f922fb4bffb0dda7a6cc7ea">GMF_PER_DATASET</a> )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                {</div>
<div class="line">                    json_object *poFlag =</div>
<div class="line">                        json_object_new_string( <span class="stringliteral">&quot;PER_DATASET&quot;</span> );</div>
<div class="line">                    json_object_array_add( poFlags, poFlag );</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;PER_DATASET &quot;</span> );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>( nMaskFlags &amp; <a class="code" href="gdal_8h.html#a752530a4d8e269da4863ca42da0e62a0">GMF_ALPHA</a> )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                {</div>
<div class="line">                    json_object *poFlag = json_object_new_string( <span class="stringliteral">&quot;ALPHA&quot;</span> );</div>
<div class="line">                    json_object_array_add( poFlags, poFlag );</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;ALPHA &quot;</span> );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>( nMaskFlags &amp; <a class="code" href="gdal_8h.html#adf04f967cbdd72c3953d7b1ffe1eeae2">GMF_NODATA</a> )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                {</div>
<div class="line">                    json_object *poFlag = json_object_new_string( <span class="stringliteral">&quot;NODATA&quot;</span> );</div>
<div class="line">                    json_object_array_add( poFlags, poFlag );</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;NODATA &quot;</span> );</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                json_object_object_add( poMask, <span class="stringliteral">&quot;flags&quot;</span>, poFlags );</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                poMaskOverviews = json_object_new_array();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( hMaskBand != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line">                <a class="code" href="gdal_8h.html#a16b185b8a771a65cc26077e3b54887bc">GDALGetOverviewCount</a>(hMaskBand) &gt; 0 )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(!bJson)</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;  Overviews of mask band: &quot;</span> );</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iOverview = 0;</div>
<div class="line">                     iOverview &lt; <a class="code" href="gdal_8h.html#a16b185b8a771a65cc26077e3b54887bc">GDALGetOverviewCount</a>(hMaskBand);</div>
<div class="line">                     iOverview++ )</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="gdal_8h.html#aeef8194c3ad5f1ed6ca27ea4cce24685">GDALRasterBandH</a> hOverview = <a class="code" href="gdal_8h.html#a00bba92f9b0c9e56e724ed07aca451b1">GDALGetOverview</a>( hMaskBand, iOverview );</div>
<div class="line">                    <span class="keywordflow">if</span>( !hOverview )</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    json_object *poMaskOverview = <span class="keyword">nullptr</span>;</div>
<div class="line">                    json_object *poMaskOverviewSize = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                    {</div>
<div class="line">                        poMaskOverview = json_object_new_object();</div>
<div class="line">                        poMaskOverviewSize = json_object_new_array();</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span>( iOverview != 0 )</div>
<div class="line">                            Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;, &quot;</span> );</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                    {</div>
<div class="line">                        json_object *poMaskOverviewSizeX =</div>
<div class="line">                            json_object_new_int(</div>
<div class="line">                                <a class="code" href="gdal_8h.html#a25c74f44562ceb26b2efe2f1f28f9b5f">GDALGetRasterBandXSize</a>(hOverview));</div>
<div class="line">                        json_object *poMaskOverviewSizeY =</div>
<div class="line">                            json_object_new_int(</div>
<div class="line">                                <a class="code" href="gdal_8h.html#a73b9be134e720404e06942dac6f4006e">GDALGetRasterBandYSize</a>(hOverview));</div>
<div class="line"></div>
<div class="line">                        json_object_array_add(poMaskOverviewSize,</div>
<div class="line">                                              poMaskOverviewSizeX);</div>
<div class="line">                        json_object_array_add(poMaskOverviewSize,</div>
<div class="line">                                              poMaskOverviewSizeY);</div>
<div class="line">                        json_object_object_add(poMaskOverview, <span class="stringliteral">&quot;size&quot;</span>,</div>
<div class="line">                                               poMaskOverviewSize);</div>
<div class="line">                        json_object_array_add(poMaskOverviews, poMaskOverview);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        Concat( osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%dx%d&quot;</span>,</div>
<div class="line">                                <a class="code" href="gdal_8h.html#a25c74f44562ceb26b2efe2f1f28f9b5f">GDALGetRasterBandXSize</a>( hOverview ),</div>
<div class="line">                                <a class="code" href="gdal_8h.html#a73b9be134e720404e06942dac6f4006e">GDALGetRasterBandYSize</a>( hOverview ) );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>( !bJson )</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">            {</div>
<div class="line">                json_object_object_add(poMask, <span class="stringliteral">&quot;overviews&quot;</span>, poMaskOverviews);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;mask&quot;</span>, poMask);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( strlen(<a class="code" href="gdal_8h.html#a48e4bb5bb87c2f2df2db3e53badefa75">GDALGetRasterUnitType</a>(hBand)) &gt; 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poUnit =</div>
<div class="line">                    json_object_new_string(<a class="code" href="gdal_8h.html#a48e4bb5bb87c2f2df2db3e53badefa75">GDALGetRasterUnitType</a>(hBand));</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;unit&quot;</span>, poUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;  Unit Type: %s\n&quot;</span>, <a class="code" href="gdal_8h.html#a48e4bb5bb87c2f2df2db3e53badefa75">GDALGetRasterUnitType</a>(hBand) );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#ac8de1aad913c58e63ee88b262594a228">GDALGetRasterCategoryNames</a>(hBand) != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> **papszCategories = <a class="code" href="gdal_8h.html#ac8de1aad913c58e63ee88b262594a228">GDALGetRasterCategoryNames</a>(hBand);</div>
<div class="line">            json_object *poCategories = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                poCategories = json_object_new_array();</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;  Categories:\n&quot;</span> );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; papszCategories[i] != <span class="keyword">nullptr</span>; i++ )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                {</div>
<div class="line">                    json_object *poCategoryName =</div>
<div class="line">                        json_object_new_string(papszCategories[i]);</div>
<div class="line">                    json_object_array_add(poCategories, poCategoryName);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;    %3d: %s\n&quot;</span>, i, papszCategories[i] );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;categories&quot;</span>, poCategories);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">int</span> bSuccess = FALSE;</div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#a27c1de2714eee9084bb3178ee7b6c740">GDALGetRasterScale</a>( hBand, &amp;bSuccess ) != 1.0</div>
<div class="line">            || <a class="code" href="gdal_8h.html#a22f8349234080d4ee9c627089af40df9">GDALGetRasterOffset</a>( hBand, &amp;bSuccess ) != 0.0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poOffset = json_object_new_double_with_precision(</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a22f8349234080d4ee9c627089af40df9">GDALGetRasterOffset</a>(hBand, &amp;bSuccess), 15);</div>
<div class="line">                json_object *poScale = json_object_new_double_with_precision(</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a27c1de2714eee9084bb3178ee7b6c740">GDALGetRasterScale</a>(hBand, &amp;bSuccess), 15);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;offset&quot;</span>, poOffset);</div>
<div class="line">                json_object_object_add(poBand, <span class="stringliteral">&quot;scale&quot;</span>, poScale);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;  Offset: %.15g,   Scale:%.15g\n&quot;</span>,</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a22f8349234080d4ee9c627089af40df9">GDALGetRasterOffset</a>( hBand, &amp;bSuccess ),</div>
<div class="line">                    <a class="code" href="gdal_8h.html#a27c1de2714eee9084bb3178ee7b6c740">GDALGetRasterScale</a>( hBand, &amp;bSuccess ) );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        GDALInfoReportMetadata( psOptions, hBand, <span class="keyword">true</span>, bJson,</div>
<div class="line">                                poBandMetadata, osStr );</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (psOptions-&gt;bShowMetadata)</div>
<div class="line">                json_object_object_add( poBand, <span class="stringliteral">&quot;metadata&quot;</span>, poBandMetadata );</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                json_object_put(poBandMetadata);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="gdal_8h.html#af1baae80dd0ec873ad7ad5b28dda44f3">GDALColorTableH</a> hTable;</div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#aec13128878a5f4e4a96605c4b6c71d6f">GDALGetRasterColorInterpretation</a>(hBand) == <a class="code" href="gdal_8h.html#ace76452d94514561fffa8ea1d2a5968ca89ac10dbf2ab669cdeaa63eaba2790c2">GCI_PaletteIndex</a></div>
<div class="line">            &amp;&amp; (hTable = <a class="code" href="gdal_8h.html#ab4ebf9ba142ed1847cfb04143fb75c3e">GDALGetRasterColorTable</a>( hBand )) != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( !bJson )</div>
<div class="line">                Concat( osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                        <span class="stringliteral">&quot;  Color Table (%s with %d entries)\n&quot;</span>,</div>
<div class="line">                        <a class="code" href="gdal_8h.html#ad8ebb02b029fec8a68399bfa71ffb553">GDALGetPaletteInterpretationName</a>(</div>
<div class="line">                            <a class="code" href="gdal_8h.html#accf2065e576a9657c2001ad8083fd8d7">GDALGetPaletteInterpretation</a>( hTable )),</div>
<div class="line">                        <a class="code" href="gdal_8h.html#a28a150b17072559e6eb452e981bfbee2">GDALGetColorEntryCount</a>( hTable ) );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (psOptions-&gt;bShowColorTable)</div>
<div class="line">            {</div>
<div class="line">                json_object *poEntries = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                {</div>
<div class="line">                    json_object *poPalette =</div>
<div class="line">                        json_object_new_string(<a class="code" href="gdal_8h.html#ad8ebb02b029fec8a68399bfa71ffb553">GDALGetPaletteInterpretationName</a>(</div>
<div class="line">                            <a class="code" href="gdal_8h.html#accf2065e576a9657c2001ad8083fd8d7">GDALGetPaletteInterpretation</a>(hTable)));</div>
<div class="line">                    json_object *poCount =</div>
<div class="line">                        json_object_new_int(<a class="code" href="gdal_8h.html#a28a150b17072559e6eb452e981bfbee2">GDALGetColorEntryCount</a>(hTable));</div>
<div class="line"></div>
<div class="line">                    json_object *poColorTable = json_object_new_object();</div>
<div class="line"></div>
<div class="line">                    json_object_object_add(poColorTable, <span class="stringliteral">&quot;palette&quot;</span>, poPalette);</div>
<div class="line">                    json_object_object_add(poColorTable, <span class="stringliteral">&quot;count&quot;</span>, poCount);</div>
<div class="line"></div>
<div class="line">                    poEntries = json_object_new_array();</div>
<div class="line">                    json_object_object_add(poColorTable, <span class="stringliteral">&quot;entries&quot;</span>, poEntries);</div>
<div class="line">                    json_object_object_add(poBand, <span class="stringliteral">&quot;colorTable&quot;</span>, poColorTable);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="gdal_8h.html#a28a150b17072559e6eb452e981bfbee2">GDALGetColorEntryCount</a>( hTable ); i++ )</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="structGDALColorEntry.html">GDALColorEntry</a> sEntry;</div>
<div class="line"></div>
<div class="line">                    <a class="code" href="gdal_8h.html#a89f76f2aaf7cc629954a7d79848ddca3">GDALGetColorEntryAsRGB</a>( hTable, i, &amp;sEntry );</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">                    {</div>
<div class="line">                        json_object *poEntry = json_object_new_array();</div>
<div class="line">                        json_object *poC1 = json_object_new_int(sEntry.<a class="code" href="structGDALColorEntry.html#ac61314ac067414ff34673e5dae112dc0">c1</a>);</div>
<div class="line">                        json_object *poC2 = json_object_new_int(sEntry.<a class="code" href="structGDALColorEntry.html#a81fe79c5d09aaa72ef37060ea4d46392">c2</a>);</div>
<div class="line">                        json_object *poC3 = json_object_new_int(sEntry.<a class="code" href="structGDALColorEntry.html#a8742ae081f0059fb876106199813cd05">c3</a>);</div>
<div class="line">                        json_object *poC4 = json_object_new_int(sEntry.<a class="code" href="structGDALColorEntry.html#a4f98e15e781c53a16a5d3aa0cac0a0e1">c4</a>);</div>
<div class="line"></div>
<div class="line">                        json_object_array_add(poEntry, poC1);</div>
<div class="line">                        json_object_array_add(poEntry, poC2);</div>
<div class="line">                        json_object_array_add(poEntry, poC3);</div>
<div class="line">                        json_object_array_add(poEntry, poC4);</div>
<div class="line">                        json_object_array_add(poEntries, poEntry);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                               <span class="stringliteral">&quot;  %3d: %d,%d,%d,%d\n&quot;</span>,</div>
<div class="line">                               i,</div>
<div class="line">                               sEntry.<a class="code" href="structGDALColorEntry.html#ac61314ac067414ff34673e5dae112dc0">c1</a>,</div>
<div class="line">                               sEntry.<a class="code" href="structGDALColorEntry.html#a81fe79c5d09aaa72ef37060ea4d46392">c2</a>,</div>
<div class="line">                               sEntry.<a class="code" href="structGDALColorEntry.html#a8742ae081f0059fb876106199813cd05">c3</a>,</div>
<div class="line">                               sEntry.<a class="code" href="structGDALColorEntry.html#a4f98e15e781c53a16a5d3aa0cac0a0e1">c4</a> );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( psOptions-&gt;bShowRAT &amp;&amp; <a class="code" href="gdal_8h.html#ab7d1f16a427315416e38ada149751997">GDALGetDefaultRAT</a>( hBand ) != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="gdal_8h.html#a8489b68bae0a6177b183a5686671ed3f">GDALRasterAttributeTableH</a> hRAT = <a class="code" href="gdal_8h.html#ab7d1f16a427315416e38ada149751997">GDALGetDefaultRAT</a>( hBand );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            {</div>
<div class="line">                json_object *poRAT =</div>
<div class="line">                    <span class="keyword">static_cast&lt;</span>json_object*<span class="keyword">&gt;</span>(<a class="code" href="gdal_8h.html#ab661bfb7fa16eca5587fcc8cc299808b">GDALRATSerializeJSON</a>( hRAT ));</div>
<div class="line">                json_object_object_add( poJsonObject, <span class="stringliteral">&quot;rat&quot;</span>, poRAT );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="structCPLXMLNode.html">CPLXMLNode</a> *psTree =</div>
<div class="line">                    <span class="keyword">static_cast&lt;</span><a class="code" href="classGDALRasterAttributeTable.html">GDALRasterAttributeTable</a> *<span class="keyword">&gt;</span>(hRAT)-&gt;Serialize();</div>
<div class="line">                <span class="keywordtype">char</span> *pszXMLText = <a class="code" href="cpl__minixml_8h.html#a17562c5f454d236e6749c73f4c93de6e">CPLSerializeXMLTree</a>( psTree );</div>
<div class="line">                <a class="code" href="cpl__minixml_8h.html#a9e05eabc54728fb3266576404200da40">CPLDestroyXMLNode</a>( psTree );</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%s\n&quot;</span>, pszXMLText );</div>
<div class="line">                <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>( pszXMLText );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>(bJson)</div>
<div class="line">            json_object_array_add(poBands, poBand);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">    {</div>
<div class="line">        json_object_object_add(poJsonObject, <span class="stringliteral">&quot;bands&quot;</span>, poBands);</div>
<div class="line">        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line">               json_object_to_json_string_ext(poJsonObject,</div>
<div class="line">                                              JSON_C_TO_STRING_PRETTY));</div>
<div class="line">        json_object_put(poJsonObject);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( psOptionsToFree != <span class="keyword">nullptr</span> )</div>
<div class="line">        <a class="code" href="gdal__utils_8h.html#a1cd3535ea95b532ea1b9be4bec155329">GDALInfoOptionsFree</a>(psOptionsToFree);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="cpl__vsi_8h.html#ad5909c421c6d6bd385f6b702a9e7c693">VSI_STRDUP_VERBOSE</a>(osStr);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                        GDALInfoReportCorner()                        */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">GDALInfoReportCorner( <span class="keyword">const</span> <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>* psOptions,</div>
<div class="line">                      <a class="code" href="gdal_8h.html#a2316f0c00f9997839f782ec946f8303d">GDALDatasetH</a> hDataset,</div>
<div class="line">                      <a class="code" href="ogr__api_8h.html#a069f206f0e8e54328d648c14658cbf81">OGRCoordinateTransformationH</a> hTransform,</div>
<div class="line">                      <span class="keyword">const</span> <span class="keywordtype">char</span> * corner_name,</div>
<div class="line">                      <span class="keywordtype">double</span> x,</div>
<div class="line">                      <span class="keywordtype">double</span> y,</div>
<div class="line">                      <span class="keywordtype">bool</span> bJson,</div>
<div class="line">                      json_object *poCornerCoordinates,</div>
<div class="line">                      json_object *poLongLatExtentCoordinates,</div>
<div class="line">                      <a class="code" href="classCPLString.html">CPLString</a>&amp; osStr )</div>
<div class="line"></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(!bJson)</div>
<div class="line">        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%-11s &quot;</span>, corner_name );</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Transform the point into georeferenced coordinates.             */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordtype">double</span> adfGeoTransform[6] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0};</div>
<div class="line">    <span class="keywordtype">double</span> dfGeoX = 0.0;</div>
<div class="line">    <span class="keywordtype">double</span> dfGeoY = 0.0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="gdal_8h.html#adf94718221d264fc798043e13adf8c8f">GDALGetGeoTransform</a>( hDataset, adfGeoTransform ) == CE_None )</div>
<div class="line">    {</div>
<div class="line">        dfGeoX = adfGeoTransform[0] + adfGeoTransform[1] * x</div>
<div class="line">            + adfGeoTransform[2] * y;</div>
<div class="line">        dfGeoY = adfGeoTransform[3] + adfGeoTransform[4] * x</div>
<div class="line">            + adfGeoTransform[5] * y;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">        {</div>
<div class="line">            json_object * <span class="keyword">const</span> poCorner = json_object_new_array();</div>
<div class="line">            json_object * <span class="keyword">const</span> poX =</div>
<div class="line">                json_object_new_double_with_precision( x, 1 );</div>
<div class="line">            json_object * <span class="keyword">const</span> poY =</div>
<div class="line">                json_object_new_double_with_precision( y, 1 );</div>
<div class="line">            json_object_array_add( poCorner, poX );</div>
<div class="line">            json_object_array_add( poCorner, poY );</div>
<div class="line">            json_object_object_add( poCornerCoordinates, corner_name,</div>
<div class="line">                                    poCorner );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;(%7.1f,%7.1f)\n&quot;</span>, x, y );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> FALSE;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Report the georeferenced coordinates.                           */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>( std::abs(dfGeoX) &lt; 181 &amp;&amp; std::abs(dfGeoY) &lt; 91 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(bJson)</div>
<div class="line">        {</div>
<div class="line">            json_object * <span class="keyword">const</span> poCorner = json_object_new_array();</div>
<div class="line">            json_object * <span class="keyword">const</span> poX =</div>
<div class="line">                json_object_new_double_with_precision( dfGeoX, 7 );</div>
<div class="line">            json_object * <span class="keyword">const</span> poY =</div>
<div class="line">                json_object_new_double_with_precision( dfGeoY, 7 );</div>
<div class="line">            json_object_array_add( poCorner, poX );</div>
<div class="line">            json_object_array_add( poCorner, poY );</div>
<div class="line">            json_object_object_add( poCornerCoordinates, corner_name,</div>
<div class="line">                                    poCorner );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                   <span class="stringliteral">&quot;(%12.7f,%12.7f) &quot;</span>, dfGeoX, dfGeoY );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(bJson)</div>
<div class="line">        {</div>
<div class="line">            json_object * <span class="keyword">const</span> poCorner = json_object_new_array();</div>
<div class="line">            json_object * <span class="keyword">const</span> poX =</div>
<div class="line">                json_object_new_double_with_precision( dfGeoX, 3 );</div>
<div class="line">            json_object * <span class="keyword">const</span> poY =</div>
<div class="line">                json_object_new_double_with_precision( dfGeoY, 3 );</div>
<div class="line">            json_object_array_add( poCorner, poX );</div>
<div class="line">            json_object_array_add( poCorner, poY );</div>
<div class="line">            json_object_object_add( poCornerCoordinates, corner_name,</div>
<div class="line">                                    poCorner );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                   <span class="stringliteral">&quot;(%12.3f,%12.3f) &quot;</span>, dfGeoX, dfGeoY );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Transform to latlong and report.                                */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>(bJson)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> dfZ = 0.0;</div>
<div class="line">        <span class="keywordflow">if</span>( hTransform != <span class="keyword">nullptr</span> &amp;&amp; !<a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>( corner_name, <span class="stringliteral">&quot;center&quot;</span> )</div>
<div class="line">        &amp;&amp; <a class="code" href="ogr__srs__api_8h.html#a54ec34fce2e8e84201feba5f89993d4a">OCTTransform</a>(hTransform,1,&amp;dfGeoX,&amp;dfGeoY,&amp;dfZ) )</div>
<div class="line">        {</div>
<div class="line">            json_object * <span class="keyword">const</span> poCorner = json_object_new_array();</div>
<div class="line">            json_object * <span class="keyword">const</span> poX =</div>
<div class="line">                json_object_new_double_with_precision( dfGeoX, 7 );</div>
<div class="line">            json_object * <span class="keyword">const</span> poY =</div>
<div class="line">                json_object_new_double_with_precision( dfGeoY, 7 );</div>
<div class="line">            json_object_array_add( poCorner, poX );</div>
<div class="line">            json_object_array_add( poCorner, poY );</div>
<div class="line">            json_object_array_add( poLongLatExtentCoordinates , poCorner );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> dfZ = 0.0;</div>
<div class="line">        <span class="keywordflow">if</span>( hTransform != <span class="keyword">nullptr</span></div>
<div class="line">        &amp;&amp; <a class="code" href="ogr__srs__api_8h.html#a54ec34fce2e8e84201feba5f89993d4a">OCTTransform</a>(hTransform,1,&amp;dfGeoX,&amp;dfGeoY,&amp;dfZ) )</div>
<div class="line">        {</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                   <span class="stringliteral">&quot;(%s,&quot;</span>, <a class="code" href="gdal_8h.html#af9ea08dcb04a81ca450bc50aa7783ffe">GDALDecToDMS</a>( dfGeoX, <span class="stringliteral">&quot;Long&quot;</span>, 2 ) );</div>
<div class="line">            Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                   <span class="stringliteral">&quot;%s)&quot;</span>, <a class="code" href="gdal_8h.html#af9ea08dcb04a81ca450bc50aa7783ffe">GDALDecToDMS</a>( dfGeoY, <span class="stringliteral">&quot;Lat&quot;</span>, 2 ) );</div>
<div class="line">        }</div>
<div class="line">        Concat(osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> TRUE;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                       GDALInfoPrintMetadata()                        */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> GDALInfoPrintMetadata( <span class="keyword">const</span> <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>* psOptions,</div>
<div class="line">                                   <a class="code" href="gdal_8h.html#ace297748fac88851533c56ddec20084f">GDALMajorObjectH</a> hObject,</div>
<div class="line">                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDomain,</div>
<div class="line">                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *pszDisplayedname,</div>
<div class="line">                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *pszIndent,</div>
<div class="line">                                   <span class="keywordtype">int</span> bJsonOutput,</div>
<div class="line">                                   json_object *poMetadata,</div>
<div class="line">                                   <a class="code" href="classCPLString.html">CPLString</a>&amp; osStr )</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">bool</span> bIsxml =</div>
<div class="line">        pszDomain != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line">        <a class="code" href="cpl__port_8h.html#afbc02be985c2bb8451a765ad38b9dc8c">STARTS_WITH_CI</a>(pszDomain, <span class="stringliteral">&quot;xml:&quot;</span>);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">bool</span> bMDIsJson =</div>
<div class="line">        pszDomain != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line">        <a class="code" href="cpl__port_8h.html#afbc02be985c2bb8451a765ad38b9dc8c">STARTS_WITH_CI</a>(pszDomain, <span class="stringliteral">&quot;json:&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">char</span> **papszMetadata = <a class="code" href="gdal_8h.html#a25929a66e99d92c2788485ecf13e2e82">GDALGetMetadata</a>( hObject, pszDomain );</div>
<div class="line">    <span class="keywordflow">if</span>( papszMetadata != <span class="keyword">nullptr</span> &amp;&amp; *papszMetadata != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        json_object *poDomain =</div>
<div class="line">            (bJsonOutput &amp;&amp; !bIsxml &amp;&amp; !bMDIsJson) ?</div>
<div class="line">                                            json_object_new_object() : <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( !bJsonOutput )</div>
<div class="line">            Concat( osStr, psOptions-&gt;bStdoutOutput, <span class="stringliteral">&quot;%s%s:\n&quot;</span>, pszIndent,</div>
<div class="line">                    pszDisplayedname );</div>
<div class="line"></div>
<div class="line">        json_object *poValue = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; papszMetadata[i] != <span class="keyword">nullptr</span>; i++ )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( bJsonOutput )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( bIsxml )</div>
<div class="line">                {</div>
<div class="line">                    poValue = json_object_new_string( papszMetadata[i] );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>( bMDIsJson )</div>
<div class="line">                {</div>
<div class="line">                    OGRJSonParse(papszMetadata[i], &amp;poValue, <span class="keyword">true</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordtype">char</span> *pszKey = <span class="keyword">nullptr</span>;</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">char</span> *pszValue =</div>
<div class="line">                        <a class="code" href="cpl__string_8h.html#a40ff577b83aca84a603414183e6903d3">CPLParseNameValue</a>( papszMetadata[i], &amp;pszKey );</div>
<div class="line">                    <span class="keywordflow">if</span>( pszKey )</div>
<div class="line">                    {</div>
<div class="line">                        poValue = json_object_new_string( pszValue );</div>
<div class="line">                        json_object_object_add( poDomain, pszKey, poValue );</div>
<div class="line">                        <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>( pszKey );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (bIsxml || bMDIsJson)</div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;%s%s\n&quot;</span>, pszIndent, papszMetadata[i] );</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;%s  %s\n&quot;</span>, pszIndent, papszMetadata[i] );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>(bJsonOutput)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>(bIsxml || bMDIsJson)</div>
<div class="line">            {</div>
<div class="line">                json_object_object_add( poMetadata, pszDomain, poValue );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(pszDomain == <span class="keyword">nullptr</span>)</div>
<div class="line">                    json_object_object_add( poMetadata, <span class="stringliteral">&quot;&quot;</span>, poDomain );</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    json_object_object_add( poMetadata, pszDomain, poDomain );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                       GDALInfoReportMetadata()                       */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> GDALInfoReportMetadata( <span class="keyword">const</span> <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>* psOptions,</div>
<div class="line">                                    <a class="code" href="gdal_8h.html#ace297748fac88851533c56ddec20084f">GDALMajorObjectH</a> hObject,</div>
<div class="line">                                    <span class="keywordtype">bool</span> bIsBand,</div>
<div class="line">                                    <span class="keywordtype">bool</span> bJson,</div>
<div class="line">                                    json_object *poMetadata,</div>
<div class="line">                                    <a class="code" href="classCPLString.html">CPLString</a>&amp; osStr )</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> pszIndent = bIsBand ? <span class="stringliteral">&quot;  &quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="comment">/*      Report list of Metadata domains                                 */</span></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>( psOptions-&gt;bListMDD )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">char</span>** papszMDDList = <a class="code" href="gdal_8h.html#a61cb7f834334fca47e72e9b096639f98">GDALGetMetadataDomainList</a>( hObject );</div>
<div class="line">        <span class="keywordtype">char</span>** papszIter = papszMDDList;</div>
<div class="line">        json_object *poMDD = <span class="keyword">nullptr</span>;</div>
<div class="line">        json_object * <span class="keyword">const</span> poListMDD = bJson ? json_object_new_array() : nullptr;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( papszMDDList != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( !bJson )</div>
<div class="line">                Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                       <span class="stringliteral">&quot;%sMetadata domains:\n&quot;</span>, pszIndent );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span>( papszIter != <span class="keyword">nullptr</span> &amp;&amp; *papszIter != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(*papszIter, <span class="stringliteral">&quot;&quot;</span>) )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                    poMDD = json_object_new_string( *papszIter );</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;%s  (default)\n&quot;</span>, pszIndent);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                    poMDD = json_object_new_string( *papszIter );</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    Concat(osStr, psOptions-&gt;bStdoutOutput,</div>
<div class="line">                           <span class="stringliteral">&quot;%s  %s\n&quot;</span>, pszIndent, *papszIter );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>( bJson )</div>
<div class="line">                json_object_array_add( poListMDD, poMDD );</div>
<div class="line">            papszIter ++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>( bJson )</div>
<div class="line">            json_object_object_add( poMetadata, <span class="stringliteral">&quot;metadataDomains&quot;</span>, poListMDD );</div>
<div class="line">        <a class="code" href="cpl__string_8h.html#a5a39b9c5896a273cc6f06c1d5be93238">CSLDestroy</a>(papszMDDList);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!psOptions-&gt;bShowMetadata)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="comment">/*      Report default Metadata domain.                                 */</span></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    GDALInfoPrintMetadata( psOptions, hObject, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Metadata&quot;</span>,</div>
<div class="line">                           pszIndent, bJson, poMetadata, osStr );</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="comment">/*      Report extra Metadata domains                                   */</span></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">if</span>( psOptions-&gt;papszExtraMDDomains != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">char</span> **papszExtraMDDomainsExpanded = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(psOptions-&gt;papszExtraMDDomains[0], <span class="stringliteral">&quot;all&quot;</span>) &amp;&amp;</div>
<div class="line">            psOptions-&gt;papszExtraMDDomains[1] == <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> ** papszMDDList = <a class="code" href="gdal_8h.html#a61cb7f834334fca47e72e9b096639f98">GDALGetMetadataDomainList</a>( hObject );</div>
<div class="line">            <span class="keywordtype">char</span> * <span class="keyword">const</span> * papszIter = papszMDDList;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">while</span>( papszIter != <span class="keyword">nullptr</span> &amp;&amp; *papszIter != <span class="keyword">nullptr</span> )</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>( !<a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(*papszIter, <span class="stringliteral">&quot;&quot;</span>) &amp;&amp;</div>
<div class="line">                    !<a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(*papszIter, <span class="stringliteral">&quot;IMAGE_STRUCTURE&quot;</span>) &amp;&amp;</div>
<div class="line">                    !<a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(*papszIter, <span class="stringliteral">&quot;SUBDATASETS&quot;</span>) &amp;&amp;</div>
<div class="line">                    !<a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(*papszIter, <span class="stringliteral">&quot;GEOLOCATION&quot;</span>) &amp;&amp;</div>
<div class="line">                    !<a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(*papszIter, <span class="stringliteral">&quot;RPC&quot;</span>) )</div>
<div class="line">                {</div>
<div class="line">                    papszExtraMDDomainsExpanded =</div>
<div class="line">                        <a class="code" href="cpl__string_8h.html#ae84fb70e547d924b925556b2105714d5">CSLAddString</a>(papszExtraMDDomainsExpanded, *papszIter);</div>
<div class="line">                }</div>
<div class="line">                papszIter ++;</div>
<div class="line">            }</div>
<div class="line">            <a class="code" href="cpl__string_8h.html#a5a39b9c5896a273cc6f06c1d5be93238">CSLDestroy</a>(papszMDDList);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            papszExtraMDDomainsExpanded =</div>
<div class="line">                <a class="code" href="cpl__string_8h.html#a35bb1bc2e81c5df5fd251d29b7e772ce">CSLDuplicate</a>(psOptions-&gt;papszExtraMDDomains);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iMDD = 0; papszExtraMDDomainsExpanded != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line">                           papszExtraMDDomainsExpanded[iMDD] != <span class="keyword">nullptr</span>; iMDD++ )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>(bJson)</div>
<div class="line">            {</div>
<div class="line">                GDALInfoPrintMetadata(</div>
<div class="line">                    psOptions, hObject, papszExtraMDDomainsExpanded[iMDD],</div>
<div class="line">                    papszExtraMDDomainsExpanded[iMDD], pszIndent, bJson,</div>
<div class="line">                    poMetadata, osStr );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="classCPLString.html">CPLString</a> osDisplayedname =</div>
<div class="line">                    <span class="stringliteral">&quot;Metadata (&quot;</span> +</div>
<div class="line">                    <a class="code" href="classCPLString.html">CPLString</a>(papszExtraMDDomainsExpanded[iMDD]) + <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"></div>
<div class="line">                GDALInfoPrintMetadata(</div>
<div class="line">                    psOptions, hObject, papszExtraMDDomainsExpanded[iMDD],</div>
<div class="line">                    osDisplayedname.c_str(), pszIndent, bJson, poMetadata,</div>
<div class="line">                    osStr );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="cpl__string_8h.html#a5a39b9c5896a273cc6f06c1d5be93238">CSLDestroy</a>(papszExtraMDDomainsExpanded);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="comment">/*      Report various named metadata domains.                          */</span></div>
<div class="line">    <span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    GDALInfoPrintMetadata( psOptions, hObject, <span class="stringliteral">&quot;IMAGE_STRUCTURE&quot;</span>,</div>
<div class="line">                           <span class="stringliteral">&quot;Image Structure Metadata&quot;</span>, pszIndent, bJson,</div>
<div class="line">                           poMetadata, osStr );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!bIsBand)</div>
<div class="line">    {</div>
<div class="line">        GDALInfoPrintMetadata( psOptions, hObject, <span class="stringliteral">&quot;SUBDATASETS&quot;</span>, <span class="stringliteral">&quot;Subdatasets&quot;</span>,</div>
<div class="line">                               pszIndent, bJson, poMetadata, osStr );</div>
<div class="line">        GDALInfoPrintMetadata( psOptions, hObject, <span class="stringliteral">&quot;GEOLOCATION&quot;</span>, <span class="stringliteral">&quot;Geolocation&quot;</span>,</div>
<div class="line">                               pszIndent, bJson, poMetadata, osStr );</div>
<div class="line">        GDALInfoPrintMetadata( psOptions, hObject, <span class="stringliteral">&quot;RPC&quot;</span>, <span class="stringliteral">&quot;RPC Metadata&quot;</span>,</div>
<div class="line">                               pszIndent, bJson, poMetadata, osStr );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                             GDALInfoOptionsNew()                     */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a> *<a class="code" href="gdal__utils_8h.html#a7c046943d55759e5b2f4007edbaaf477">GDALInfoOptionsNew</a>(</div>
<div class="line">    <span class="keywordtype">char</span>** papszArgv,</div>
<div class="line">    <a class="code" href="gdal__utils_8h.html#a1abbd14aff4c7d715a4eca1feb0afde9">GDALInfoOptionsForBinary</a>* psOptionsForBinary )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> bGotFilename = <span class="keyword">false</span>;</div>
<div class="line">    <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a> *psOptions = <span class="keyword">static_cast&lt;</span><a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a> *<span class="keyword">&gt;</span>(</div>
<div class="line">        <a class="code" href="cpl__conv_8h.html#a638021df488a13e18115e2e0c013bef0">CPLCalloc</a>( 1, <span class="keyword">sizeof</span>(<a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a>) ) );</div>
<div class="line"></div>
<div class="line">    psOptions-&gt;eFormat = GDALINFO_FORMAT_TEXT;</div>
<div class="line">    psOptions-&gt;bComputeMinMax = FALSE;</div>
<div class="line">    psOptions-&gt;bReportHistograms = FALSE;</div>
<div class="line">    psOptions-&gt;bReportProj4 = FALSE;</div>
<div class="line">    psOptions-&gt;bStats = FALSE;</div>
<div class="line">    psOptions-&gt;bApproxStats = TRUE;</div>
<div class="line">    psOptions-&gt;bSample = FALSE;</div>
<div class="line">    psOptions-&gt;bComputeChecksum = FALSE;</div>
<div class="line">    psOptions-&gt;bShowGCPs = TRUE;</div>
<div class="line">    psOptions-&gt;bShowMetadata = TRUE;</div>
<div class="line">    psOptions-&gt;bShowRAT = TRUE;</div>
<div class="line">    psOptions-&gt;bShowColorTable = TRUE;</div>
<div class="line">    psOptions-&gt;bListMDD = FALSE;</div>
<div class="line">    psOptions-&gt;bShowFileList = TRUE;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line"><span class="comment">/*      Parse arguments.                                                */</span></div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------- */</span></div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; papszArgv != <span class="keyword">nullptr</span> &amp;&amp; papszArgv[i] != <span class="keyword">nullptr</span>; i++ )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i],<span class="stringliteral">&quot;-json&quot;</span>) )</div>
<div class="line">            psOptions-&gt;eFormat = GDALINFO_FORMAT_JSON;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-mm&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bComputeMinMax = TRUE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-hist&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bReportHistograms = TRUE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-proj4&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bReportProj4 = TRUE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-stats&quot;</span>) )</div>
<div class="line">        {</div>
<div class="line">            psOptions-&gt;bStats = TRUE;</div>
<div class="line">            psOptions-&gt;bApproxStats = FALSE;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-approx_stats&quot;</span>) )</div>
<div class="line">        {</div>
<div class="line">            psOptions-&gt;bStats = TRUE;</div>
<div class="line">            psOptions-&gt;bApproxStats = TRUE;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-sample&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bSample = TRUE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-checksum&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bComputeChecksum = TRUE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-nogcp&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bShowGCPs = FALSE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-nomd&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bShowMetadata = FALSE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-norat&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bShowRAT = FALSE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-noct&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bShowColorTable = FALSE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-listmdd&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bListMDD = TRUE;</div>
<div class="line">        <span class="comment">/* Not documented: used by gdalinfo_bin.cpp only */</span></div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-stdout&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bStdoutOutput = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-mdd&quot;</span>) &amp;&amp; papszArgv[i+1] != nullptr )</div>
<div class="line">        {</div>
<div class="line">            psOptions-&gt;papszExtraMDDomains = <a class="code" href="cpl__string_8h.html#ae84fb70e547d924b925556b2105714d5">CSLAddString</a>(</div>
<div class="line">                psOptions-&gt;papszExtraMDDomains, papszArgv[++i] );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-oo&quot;</span>) &amp;&amp; papszArgv[i+1] != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            i++;</div>
<div class="line">            <span class="keywordflow">if</span>( psOptionsForBinary )</div>
<div class="line">            {</div>
<div class="line">                psOptionsForBinary-&gt;papszOpenOptions = <a class="code" href="cpl__string_8h.html#ae84fb70e547d924b925556b2105714d5">CSLAddString</a>(</div>
<div class="line">                     psOptionsForBinary-&gt;papszOpenOptions, papszArgv[i] );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-nofl&quot;</span>) )</div>
<div class="line">            psOptions-&gt;bShowFileList = FALSE;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="cpl__port_8h.html#a8eb7da27bde11ccd5bf0c204ad32fb89">EQUAL</a>(papszArgv[i], <span class="stringliteral">&quot;-sd&quot;</span>) &amp;&amp; papszArgv[i+1] != <span class="keyword">nullptr</span> )</div>
<div class="line">        {</div>
<div class="line">            i++;</div>
<div class="line">            <span class="keywordflow">if</span>( psOptionsForBinary )</div>
<div class="line">            {</div>
<div class="line">                psOptionsForBinary-&gt;nSubdataset = atoi(papszArgv[i]);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( papszArgv[i][0] == <span class="charliteral">&#39;-&#39;</span> )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="cpl__error_8h.html#afda4d86428c1c533449ae6a69cdf430d">CPLError</a>(CE_Failure, <a class="code" href="cpl__error_8h.html#a3a532186d9f9e2699aee57aab0648b5e">CPLE_NotSupported</a>,</div>
<div class="line">                     <span class="stringliteral">&quot;Unknown option name &#39;%s&#39;&quot;</span>, papszArgv[i]);</div>
<div class="line">            <a class="code" href="gdal__utils_8h.html#a1cd3535ea95b532ea1b9be4bec155329">GDALInfoOptionsFree</a>(psOptions);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !bGotFilename )</div>
<div class="line">        {</div>
<div class="line">            bGotFilename = <span class="keyword">true</span>;</div>
<div class="line">            <span class="keywordflow">if</span>( psOptionsForBinary )</div>
<div class="line">                psOptionsForBinary-&gt;pszFilename = <a class="code" href="cpl__conv_8h.html#a0430cfd9565379fa7c9452316c863c07">CPLStrdup</a>(papszArgv[i]);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="cpl__error_8h.html#afda4d86428c1c533449ae6a69cdf430d">CPLError</a>(CE_Failure, <a class="code" href="cpl__error_8h.html#a3a532186d9f9e2699aee57aab0648b5e">CPLE_NotSupported</a>,</div>
<div class="line">                     <span class="stringliteral">&quot;Too many command options &#39;%s&#39;&quot;</span>, papszArgv[i]);</div>
<div class="line">            <a class="code" href="gdal__utils_8h.html#a1cd3535ea95b532ea1b9be4bec155329">GDALInfoOptionsFree</a>(psOptions);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> psOptions;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"><span class="comment">/*                             GDALInfoOptionsFree()                    */</span></div>
<div class="line"><span class="comment">/************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="gdal__utils_8h.html#a1cd3535ea95b532ea1b9be4bec155329">GDALInfoOptionsFree</a>( <a class="code" href="gdal__utils_8h.html#a1ab627f7c3092f9861a45a4db42832cd">GDALInfoOptions</a> *psOptions )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( psOptions != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="cpl__string_8h.html#a5a39b9c5896a273cc6f06c1d5be93238">CSLDestroy</a>( psOptions-&gt;papszExtraMDDomains );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="cpl__conv_8h.html#a21b7f312da39ddb0a12bdde06b153b48">CPLFree</a>(psOptions);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<hr>
Generated for GDAL by
<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.8.
</body>
</html>
