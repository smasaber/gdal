<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>GDAL: rgb2pct.py</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDAL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="usergroup0.html"><span>Download</span></a></li>
      <li><a href="https://github.com/OSGeo/gdal/issues/"><span>Issue&#160;Tracker</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">rgb2pct.py </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Convert a 24bit RGB image to 8bit paletted.</p>
<h1><a class="anchor" id="rgb2pct_synopsis"></a>
SYNOPSIS</h1>
<pre class="fragment">rgb2pct.py [-n colors | -pct palette_file] [-of format] source_file dest_file
</pre><h1><a class="anchor" id="rgb2pct_description"></a>
DESCRIPTION</h1>
<p>This utility will compute an optimal pseudo-color table for a given RGB image using a median cut algorithm on a downsampled RGB histogram. Then it converts the image into a pseudo-colored image using the color table. This conversion utilizes Floyd-Steinberg dithering (error diffusion) to maximize output image visual quality.</p>
<dl>
<dt><b>-n</b> <em>colors</em>:</dt>
<dd>Select the number of colors in the generated color table. Defaults to 256. Must be between 2 and 256.  </dd>
<dt><b>-pct</b> <em>palette_file</em>:</dt>
<dd>Extract the color table from <em>palette_file</em> instead of computing it. Can be used to have a consistent color table for multiple files. The <em>palette_file</em> must be a raster file in a GDAL supported format with a palette. </dd>
<dt><b>-of</b> <em>format</em>:</dt>
<dd>Select the output format. Starting with GDAL 2.3, if not specified, the format is guessed from the extension (previously was GTiff). Use the short format name. Only output formats supporting pseudo-color tables should be used.  </dd>
<dt><em>source_file</em>:</dt>
<dd>The input RGB file.  </dd>
<dt><em>dest_file</em>:</dt>
<dd>The output pseudo-colored file that will be created. </dd>
</dl>
<p>NOTE: rgb2pct.py is a Python script, and will only work if GDAL was built with Python support.</p>
<h1><a class="anchor" id="rgb2pct_example"></a>
EXAMPLE</h1>
<p>If it is desired to hand create the palette, likely the simplest text format is the GDAL VRT format. In the following example a VRT was created in a text editor with a small 4 color palette with the RGBA colors 238/238/238/255, 237/237/237/255, 236/236/236/255 and 229/229/229/255.</p>
<pre class="fragment">% rgb2pct.py -pct palette.vrt rgb.tif pseudo-colored.tif
% more &lt; palette.vrt
&lt;VRTDataset rasterXSize="226" rasterYSize="271"&gt;
  &lt;VRTRasterBand dataType="Byte" band="1"&gt;
    &lt;ColorInterp&gt;Palette&lt;/ColorInterp&gt;
    &lt;ColorTable&gt;
      &lt;Entry c1="238" c2="238" c3="238" c4="255"/&gt;
      &lt;Entry c1="237" c2="237" c3="237" c4="255"/&gt;
      &lt;Entry c1="236" c2="236" c3="236" c4="255"/&gt;
      &lt;Entry c1="229" c2="229" c3="229" c4="255"/&gt;
    &lt;/ColorTable&gt;
  &lt;/VRTRasterBand&gt;
&lt;/VRTDataset&gt;
</pre> </div></div><!-- contents -->
<hr>
Generated for GDAL by
<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.8.
</body>
</html>
